(this["webpackJsonpconnect-4"]=this["webpackJsonpconnect-4"]||[]).push([[0],{13:function(e,r,t){},14:function(e,r,t){},15:function(e,r,t){"use strict";t.r(r);var c=t(1),n=t.n(c),o=t(7),a=t.n(o),l=t(0);var u=function(){return Object(l.jsx)("p",{children:"Options: set name, colour, theme"})};var s=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h2",{children:"Lobby"}),Object(l.jsx)("p",{children:"Create or join a room."})]})},i=t(3),j=t(2);var b=function(){return Object(l.jsx)("p",{children:"Header: room status (names, colours, w-l-d record), room reset options."})};t(13);function d(e){var r=e.row,t=e.placePiece,c=e.colours,n=e.toPlayNext,o=r.map((function(e,r){var o=e.player,a=e.inLine;return Object(l.jsx)(p,{col:r,player:o,placePiece:t,colours:c,inLine:a,toPlayNext:n},r)}));return Object(l.jsx)("tr",{children:o})}function p(e){var r=e.col,t=e.player,c=e.placePiece,n=e.colours,o=e.inLine,a=e.toPlayNext;var u=null===t?"clickable cell":"cell",s=null===t?c:function(e,r){};return Object(l.jsx)("td",{className:u,onClick:function(){return s(a,r)},children:null!==t&&Object(l.jsx)("span",{className:"piece",style:function(){var e=n[t];return{backgroundColor:e,borderColor:o?"Black":e}}()})})}var f=function(e){for(var r=e.board,t=e.placePiece,c=e.colours,n=e.toPlayNext,o=[],a=r.length-1;a>-1;a--)o.push(Object(l.jsx)(d,{row:r[a],placePiece:t,colours:c,toPlayNext:n},a));return Object(l.jsx)("table",{className:"board",children:Object(l.jsx)("tbody",{children:o})})};var O=function(e){var r=e.resetGame;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("p",{children:"Footer: game status (onging/lost/etc), game reset options."}),Object(l.jsx)("button",{onClick:function(){return r(0)},children:"Reset Game"})]})};function h(e,r){switch(r.type){case"reset":return y(r.boardSize);case"placePiece":var t=Object(i.a)(e);t[r.row][r.col].player=r.player;var c=m(t,r.row,r.col),n=c.success,o=c.r_0,a=c.c_0,l=c.d_r,u=c.d_c;if(n)for(var s=0;s<4;s++)t[o+s*l][a+s*u].inLine=!0;return t;case"undo":if(r.moveHistory===[])return e;var j=Object(i.a)(e);return delete j[r.row][r.col].player,j;default:return e}}function v(e,r){switch(r.type){case"reset":return[];case"addMove":var t=Object(i.a)(e),c=r.player,n=r.row,o=r.col;return t.push({player:c,row:n,col:o}),t;case"undo":if(e===[])return e;var a=Object(i.a)(e);return a.pop(),a;default:return console.log("historyReducer switch didn't match any case"),e}}function y(e){for(var r=Object(j.a)(e,2),t=r[0],c=r[1],n=[],o=0;o<t;o++){for(var a=[],l=0;l<c;l++)a.push({player:null,inLine:!1});n.push(a)}return n}var x=[[0,1],[1,0],[1,1],[-1,1]];function m(e,r,t){var c=[e.length,e[0].length],n=c[0],o=c[1],a=e[r][t].player;if(null===a)return{success:!1};var l=!1,u=null,s=null,i=null,b=null;return x.forEach((function(c){var d=Object(j.a)(c,2),p=d[0],f=d[1];if(!l){u=null,s=null,i=p,b=f;for(var O=0,h=-3;h<4;h++)-1<r+h*p&&r+h*p<n&&-1<t+h*f&&t+h*f<o&&e[r+h*p][t+h*f].player===a?(0===O&&(u=r+h*p,s=t+h*f),(O+=1)>=4&&(l=!0)):O=0}})),{success:l,r_0:u,c_0:s,d_r:i,d_c:b}}var g=function(e){e.creator;var r=Object(c.useState)(1),t=Object(j.a)(r,2),n=(t[0],t[1],Object(c.useReducer)((function(e,r){var t=Object(i.a)(e);return t[r.player][r.property]=r.value,t}),[{name:"Alice",colour:"blue"},{name:"Bob",colour:"red"}])),o=Object(j.a)(n,2),a=o[0],u=(o[1],function(e){var r=[6,7],t=Object(c.useState)("ongoing"),n=Object(j.a)(t,2),o=n[0],a=n[1],l=Object(c.useState)(e),u=Object(j.a)(l,2),s=u[0],i=u[1],b=Object(c.useReducer)(h,y(r)),d=Object(j.a)(b,2),p=d[0],f=d[1],O=Object(c.useReducer)(v,[]),x=Object(j.a)(O,2),g=x[0],P=x[1];return Object(c.useEffect)((function(){if(g.length>0){var e=g[g.length-1],r=e.row,t=e.col,c=m(p,r,t).success;"ongoing"===o&&c?(a(p[r][t].player),i(null)):"ongoing"===o&&function(e){var r=!1;return e[e.length-1].forEach((function(e){null===e.player&&(r=!0)})),!r}(p)&&(a("draw"),i(null))}}),[g,p,o]),{gameStatus:o,toPlayNext:s,board:p,moveHistory:g,resetGame:function(e){a("ongoing"),i(e),f({type:"reset",boardSize:r}),P({type:"reset"})},placePiece:function(e,r){var t=function(e,r){for(var t=e.length,c=0;c<t;c++)if(null===e[c][r].player)return c;return null}(p,r);"ongoing"===o&&e===s&&null!==t&&(f({type:"placePiece",player:e,row:t,col:r}),P({type:"addMove",player:e,row:t,col:r}),i(1-e))}}}(0)),s=u.gameStatus,d=u.toPlayNext,p=u.board,x=u.resetGame,g=u.placePiece;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h2",{children:"Room"}),Object(l.jsx)(b,{}),Object(l.jsx)(f,{board:p,placePiece:g,colours:[a[0].colour,a[1].colour],toPlayNext:d}),Object(l.jsx)(O,{gameStatus:s,resetGame:x})]})};var P=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h1",{children:"Connect 4 [WIP]"}),Object(l.jsx)(u,{}),Object(l.jsx)(s,{}),Object(l.jsx)(g,{})]})};t(14);a.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(P,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.eb6e2947.chunk.js.map