(this["webpackJsonpconnect-4"]=this["webpackJsonpconnect-4"]||[]).push([[0],{14:function(e,t,r){},15:function(e,t,r){},16:function(e,t,r){"use strict";r.r(t);var n=r(1),o=r.n(n),a=r(7),c=r.n(a),s=r(0);var l=function(){return Object(s.jsx)("p",{children:"Options: set name, colour, theme"})};var i=function(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:"Lobby"}),Object(s.jsx)("p",{children:"Create or join a room."})]})};var u=function(e){var t=e.isOwner,r=e.playerCount,n=e.opponent,o=e.restartMethod,a=e.resultHistory;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{children:function(){switch(o){case"random":return"The first player of a new game is selected randomly.";case"alternate":return"Players alternate playing first in a new game.";default:return"The "+o+" of a game will go first for the next game. In the event of a draw, the same player will go first."}}()}),1===r?Object(s.jsx)("div",{children:"Waiting for an opponent to join the room."}):Object(s.jsxs)("div",{children:[Object(s.jsx)("span",{style:{color:"Blue"},children:"You"})," are playing against"," ",Object(s.jsx)("span",{style:{color:n.colour},children:n.name}),"."]}),2===r&&Object(s.jsxs)("div",{children:[Object(s.jsxs)("span",{children:["Wins: ",a.wins]}),Object(s.jsxs)("span",{children:["Draws: ",a.draws]}),Object(s.jsxs)("span",{children:["Loses: ",a.loses]})]}),Object(s.jsxs)("div",{children:[t?Object(s.jsx)("button",{children:"Close Room"}):Object(s.jsx)("button",{children:"Leave Room"}),t&&2===r&&Object(s.jsx)("button",{children:"Kick Opponent"})]})]})};r(14);function d(e){var t=e.viewer,r=e.row,n=e.placePiece,o=e.colours,a=e.toPlayNext,c=r.map((function(e,r){var c=e.player,l=e.isHighlight;return Object(s.jsx)(j,{viewer:t,col:r,player:c,placePiece:n,colours:o,isHighlight:l,toPlayNext:a},r)}));return Object(s.jsx)("tr",{children:c})}function j(e){var t=e.viewer,r=e.col,n=e.player,o=e.placePiece,a=e.colours,c=e.isHighlight,l=e.toPlayNext,i=a[n]||"White",u={backgroundColor:i,borderColor:c?"White":i},d=null===n&&t===l?"clickable cell":"cell";return Object(s.jsx)("td",{className:d,onClick:function(){return null===n&&o(l,r)},children:Object(s.jsx)("span",{className:"piece",style:u})})}var h=function(e){for(var t=e.viewer,r=e.board,n=e.placePiece,o=e.colours,a=e.toPlayNext,c=[],l=r.length-1;l>-1;l--)c.push(Object(s.jsx)(d,{viewer:t,row:r[l],placePiece:n,colours:o,toPlayNext:a},l));return Object(s.jsx)("table",{className:"board",style:{backgroundColor:"Black"},children:Object(s.jsx)("tbody",{children:c})})};var b=function(e){var t=e.viewer,r=e.toPlayNext,n=e.gameStatus,o=e.resetGame,a=e.restartMethod,c=e.wentFirst,l=e.setWentFirst;function i(e){switch(a){case"random":var t=Math.floor(2*Math.random());o(t),l(t);break;case"alternate":o(1-c),l(1-c);break;case"loser":"draw"===e?o(c):(o(1-e),l(1-e));break;case"winner":o("draw"===e?c:e);break;default:console.log("New Game click handler didn't match any case."),o(0)}}return e.dispatchResult,Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("p",{children:function(){switch(n){case t:return"Congratulations, you won!";case 1-t:return"You lost.";case"draw":return"It's a draw.";case"ongoing":return t===r?"It's your turn to drop a piece.":"Waiting for your opponent to move.";default:return"Something has gone wrong. Apologies."}}()}),"ongoing"===n?Object(s.jsx)("button",{onClick:function(){i(1)},children:"Forfeit"}):Object(s.jsx)("button",{onClick:i,children:"New Game"})]})},p=r(2),f=r(8),O=r(4),g=[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]];function y(e,t,r){for(var n=[],o=0;o<e;o++){for(var a=[],c=0;c<t;c++)a.push("empty"===r?{}:r);n.push(a)}return n}function v(e,t){for(var r=e.length,n=[e[0].length,e[0][0].length],o=n[0],a=n[1],c=y(o,a,"empty"),s=0;s<o;s++)for(var l=0;l<a;l++){c[s][l]={};for(var i=0;i<r;i++)c[s][l][t[i]]=e[i][s][l]}return c}function w(e,t){var r=Object(O.a)(e);switch(t.type){case"reset":return[];case"addMove":var n=t.player,o=t.row,a=t.col;return r.push({player:n,row:o,col:a}),r;case"undo":return e===[]?e:(r.pop(),r);default:return console.log("moveHistoryReducer switch didn't match any case"),e}}function m(e,t){var r=Object(O.a)(e);switch(t.type){case"reset":return y(t.rows,t.cols,null);case"placePiece":return r[t.row][t.col]=t.player,r;case"undo":return r[t.row][t.col]=null,r;default:return console.log("peicesReducer switch didn't match any case"),e}}function x(e,t){var r=Object(O.a)(e);return r[t.property]=t.value,r}function P(e,t){switch(t.type){case"reset":return k;default:var r=Object(f.a)({},e);return r[t.type+"s"]+=1,r}}var k={wins:0,draws:0,loses:0};function N(){var e=Math.floor(2*Math.random()),t=Object(n.useState)(2),r=Object(p.a)(t,2),o=r[0],a=(r[1],Object(n.useReducer)(x,{name:"Bob",colour:"red"})),c=Object(p.a)(a,2),s=c[0],l=(c[1],Object(n.useState)(e)),i=Object(p.a)(l,2),u=i[0],d=i[1],j=Object(n.useReducer)(P,k),h=Object(p.a)(j,2),b=h[0],f=h[1],O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,a=Object(n.useState)(e),c=Object(p.a)(a,2),s=c[0],l=c[1],i=Object(n.useReducer)(w,[]),u=Object(p.a)(i,2),d=u[0],j=u[1],h=Object(n.useReducer)(m,y(t,r,null)),b=Object(p.a)(h,2),f=b[0],O=b[1],x=M()?d[d.length-1].player:F()?"draw":"ongoing",P=R(),k=v([f,P],["player","isHighlight"]),N="ongoing"!==x?null:0===d.length?s:1-d[d.length-1].player;function C(e){for(var r=0;r<t;r++)if(null===f[r][e])return r;return null}function F(){for(var e=0;e<r;e++)if(null===f[t-1][e])return!1;return!0}function M(){if(d.length<2*o-1)return!1;for(var e=d[d.length-1],t=e.player,r=e.row,n=e.col,a=0;a<g.length;a++)for(var c=Object(p.a)(g[a],2),s=c[0],l=c[1],i=-3;i<1;i++)if(S(t,r+i*s,n+i*l,s,l))return!0;return!1}function R(){var e=y(t,r,!1);if(d.length<2*o-1)return e;for(var n=d[d.length-1],a=n.player,c=n.row,s=n.col,l=0;l<g.length;l++)for(var i=Object(p.a)(g[l],2),u=i[0],j=i[1],h=1-o;h<1;h++)if(S(a,c+h*u,s+h*j,u,j))for(var b=h;b<h+o;b++)e[c+b*u][s+b*j]=!0;return e}function S(e,n,a,c,s){for(var l=0;l<o;l++){var i=n+l*c,u=a+l*s;if(0>i||i>=t||0>u||u>=r||f[i][u]!==e)return!1}return!0}function W(e){l(e),j({type:"reset"}),O({type:"reset",rows:t,cols:r})}function H(e,t){var r=C(t);"ongoing"===x&&e===N&&null!==r&&(j({type:"addMove",player:e,row:r,col:t}),O({type:"placePiece",player:e,row:r,col:t}))}return{gameStatus:x,toPlayNext:N,board:k,resetGame:W,placePiece:H}}(e),N=O.gameStatus,C=O.toPlayNext;O.board,O.resetGame,O.placePiece;return Object(n.useEffect)((function(){switch(N){case 0:f({type:"win"});break;case 1:f({type:"lose"});break;case"draw":f({type:"draw"})}}),[N]),Object(n.useEffect)((function(){}),[C]),Object(n.useEffect)((function(){}),[o]),{game:O,playerCount:o,opponent:s,resultHistory:b,wentFirst:u,setWentFirst:d,dispatchResult:f}}var C=function(e){var t=e.isOwner,r=(e.roomId,e.restartMethod),n=N(),o=n.game,a=n.playerCount,c=n.opponent,l=n.resultHistory,i=n.wentFirst,d=n.setWentFirst,j=n.dispatchResult,p=o.gameStatus,f=o.toPlayNext,O=o.board,g=o.resetGame,y=o.placePiece;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:"Room"}),Object(s.jsx)(u,{isOwner:t,playerCount:a,opponent:c,restartMethod:r,resultHistory:l}),2===a&&Object(s.jsx)(h,{viewer:0,board:O,placePiece:y,colours:["Blue",c.colour],toPlayNext:f}),2===a&&Object(s.jsx)(b,{viewer:0,toPlayNext:f,gameStatus:p,resetGame:g,restartMethod:r,wentFirst:i,setWentFirst:d,dispatchResult:j})]})};var F=function(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h1",{children:"Connect 4 [WIP]"}),Object(s.jsx)(l,{}),Object(s.jsx)(i,{}),Object(s.jsx)(C,{isOwner:!0,roomId:"2134676543",restartMethod:"alternate"})]})};r(15);c.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(F,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.143209f7.chunk.js.map