{"version":3,"sources":["Header/Header.js","Header/PlayerInfo.js","Header/PlayerName.js","Header/PlayerColour.js","Header/Options.js","Header/PieceGradients.js","Header/SiteTheme.js","Header/SiteSound.js","Lobby/CreateRoom.js","Lobby/JoinRoom.js","Lobby/CreateMultiPlayer.js","Lobby/CreateSinglePlayer.js","Colours.js","Lobby/Lobby.js","Lobby/useLobby.js","Game/Results.js","Remote/RemoteHeader.js","Game/Board.js","Game/GameFooter.js","Game/boardStats.js","Game/useGame.js","sounds/water_dropwav-6707.mp3","sounds/good-6081.mp3","sounds/failure-drum-sound-effect-2mp3-7184.mp3","sounds/mixkit-retro-game-notification-212.wav","Game/useGameSoundEffects.js","sounds/success-1-6297.mp3","sounds/chime-sound-7143.mp3","sounds/notification-sound-7062.mp3","sounds/fist-punch-or-kick-7171.mp3","sounds/power-down-7103.mp3","Remote/useReceiveMessages.js","Game/useResults.js","Remote/useRoom.js","Remote/useRoomSoundEffects.js","Remote/useSendMessages.js","Remote/RemotePlay.js","Local/LocalHeader.js","Computer/useComputerPlayer.js","Local/LocalPlay.js","links/website-logo.svg","links/Links.js","links/github.png","links/github-dark.png","useLocalState.js","sounds/useSound.js","App.js","pubnubKeys.js","index.js"],"names":["Header","children","className","PlayerInfo","self","PlayerName","editable","name","setName","useState","isEditing","setIsEditing","loseFocusHandler","newName","trim","autoFocus","type","value","placeholder","onChange","e","target","length","onKeyDown","key","onBlur","onClick","PlayerColour","colour","setColour","newColour","disabled","Options","PieceGradients","usingGradient","setUsingGradient","toString","SiteTheme","themeType","toggleTheme","capitalizedTheme","charAt","toUpperCase","slice","SiteSound","soundIsOn","toggleSound","CreateRoom","createRoom","restartMethodInput","setRestartMethodInput","handleChange","map","method","toLowerCase","checked","preventDefault","JoinRoom","joinRoom","roomCodeInput","setRoomCodeInput","CreateMultiPlayer","playLocally","CreateSinglePlayer","playComputer","colours","getRandomColour","Math","floor","random","oppositeColourOf","r","g","b","minVal","min","maxVal","max","delta","sum","avg","deltaR","deltaG","deltaB","rawH","rgbToHsl","parseInt","substring","h","s","l","v2","v1","help","hslToRgb","newR","newG","newB","pad","round","hexStr","v3","newV3","checkOccupancyFailMessage","Lobby","setOpponent","setPlayType","setRoomCode","setIsOwner","setRestartMethod","network","roomCode","a","hereNow","channels","room","totalOccupancy","alert","console","error","getRoomOccupancy","generateUnusedRoomCode","chars","occupancy","i","restartMethod","generatedRoomCode","roomOccupancy","useLobby","Results","resultHistory","headings","wins","draws","loses","RemoteHeader","isOwner","hasOpponent","kickOpponent","closeRoom","leaveRoom","restartMethodMessage","copyToClipboard","navigator","clipboard","writeText","Row","row","columns","isViewersTurn","viewer","makeMove","useContext","GradientContext","rowCells","col","piece","isWinner","wouldWin","Cell","handleClick","useGradient","isHighlight","isClickable","isFull","ThemeContext","background","foreground","backgroundColor","borderColor","pieceStyle","gradientPieceStyle","backgroundImage","cellClass","cellStyle","style","Board","positions","tableRows","push","GameFooter","sharingScreen","names","gameStatus","winner","toPlayNext","forfeit","startNewGame","hasRestartChoice","newGameText","gameStatusMessage","primaryDirections","boardStats","pieces","rows","cols","lineLen","lines","c","forEach","deltaC","counts","ind","r2","c2","positionInBounds","isInBounds","basicLineStats","basicPositionStats","line","fill","offset","subR2","isHot","firstOpenRow","linesThrough","result","checkWouldWin","every","checkWinner","positionsOn","dR","dC","pos","emptyTable","val","table","gameStatesReducer","state","action","newState","moveHistory","player","pop","useGame","toPlayFirst","setToPlayFirst","waiting","setWaiting","forfeiter","setForfeiter","useReducer","dispatchToGame","keyAttributes","getBoardStats","prevMove","boardIsWon","boardIsFull","boardStatus","resetGame","startGame","option","prev","randomPlayer","placePiece","column","useGameSoundEffects","setSoundToPlay","SoundContext","useEffect","winSound","loseSound","drawSound","yourTurnSound","reduceMessageQueue","message","shift","useReceiveMessages","uuid","resetRoom","unmountRoom","incomingMessageQueue","dispatchIncomingMessageQueue","queueIncomingMessage","useCallback","opp","handleMessage","subscribe","withPresence","unsubscribe","listener","event","addListener","removeListener","initialResults","resultReducer","useResults","dispatchResult","resetResults","useRoom","opponent","playerJoinSound","playerLeaveSound","createRoomSound","joinRoomSound","closeRoomSound","leaveRoomSound","playKickSound","kickOpponentSound","useRoomSoundEffects","publishMessage","publish","channel","useSendMessages","Room","LocalHeader","unmount","textAboutOpponent","useComputerPlayer","active","computerIndex","computersTurn","dropInCol","playNow","setPlayNow","maxNotableLinesThroughPosition","piecesPlayed","ans","scores","lineTypeCounts","empty","dead","Array","addLineType","wouldBlockOppWin","oppCouldWinOnTop","oppCouldBlockWinOnTop","elseScoreUpperBound","score","lineTypeCount","pieceCount","scoreOwnLine","scoreOppLine","nextMove","indicesOfMax","getNextMove","thinkTime","thisMaxThinkTime","sqrt","firstMax","secondMax","ratio","randomFactor","randomFactorRange","getThinkTime","log","setTimeout","LocalPlay","Link","url","image","description","href","rel","src","alt","Links","gitHubLink","links","websiteImage","useLocalState","initialValue","savedValue","JSON","parse","localStorage","getItem","setValue","setLocalValue","newValue","setItem","stringify","useSound","soundToPlay","Audio","play","themes","light","dark","createContext","App","theme","setTheme","themeToggled","setThemeToggled","setSoundIsOn","modifyOpponent","copy","playType","resetAll","generateRandomUuid","useMemo","PubNub","publishKey","subscribeKey","document","body","color","transition","transitionProperty","Provider","RemotePlay","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.64b059af.chunk.js","sourcesContent":["import \"./header.css\";\n\nfunction Header({ children }) {\n  return <div className=\"header\">{children}</div>;\n}\n\nexport default Header;\n","function PlayerInfo({ children, self }) {\n  return (\n    <div className={\"playerInfo headerBlock \" + (self ? \"self\" : \"opponent\")}>\n      <h3>{self ? \"You\" : \"Opponent\"}</h3>\n      {children}\n    </div>\n  );\n}\n\nexport default PlayerInfo;\n","import { useState } from \"react\";\n\nconst defaultName = \"Nameless\";\n\nfunction PlayerName({ editable, name, setName }) {\n  const [isEditing, setIsEditing] = useState(false);\n\n  // click name to edit it\n  function clickHandler() {\n    setIsEditing(true);\n  }\n\n  // type name; update state\n  function changeHandler(e) {\n    // max valid length of 20\n    if (e.target.value.length <= 20) {\n      setName(e.target.value);\n    }\n  }\n\n  // save/submit via enter...\n  function keyDownHandler(e) {\n    if (e.key === \"Enter\") {\n      loseFocusHandler();\n    }\n  }\n\n  // ... or by clicking anywhere outside (losing focus)\n  function loseFocusHandler() {\n    const newName = name === \"\" ? defaultName : name.trim();\n    setName(newName);\n    setIsEditing(false);\n  }\n\n  return (\n    <div>\n      {isEditing ? (\n        <input\n          autoFocus\n          type=\"text\"\n          value={name}\n          placeholder=\"Name\"\n          onChange={changeHandler}\n          onKeyDown={keyDownHandler}\n          onBlur={loseFocusHandler}\n        />\n      ) : editable ? (\n        <button onClick={clickHandler}>{name}</button>\n      ) : (\n        name\n      )}\n    </div>\n  );\n}\n\nexport default PlayerName;\n","function PlayerColour({ editable, colour, setColour }) {\n  function changeHandler(e) {\n    const newColour = e.target.value;\n    setColour(newColour);\n  }\n\n  return (\n    <div>\n      Colour:{\" \"}\n      {editable ? (\n        <input type=\"color\" value={colour} onChange={changeHandler} />\n      ) : (\n        <input type=\"color\" disabled value={colour} />\n      )}\n    </div>\n  );\n}\n\nexport default PlayerColour;\n","function Options({ children }) {\n  return (\n    <div className=\"options headerBlock\">\n      <h3>Options</h3>\n      {children}\n    </div>\n  );\n}\n\nexport default Options;\n","function PieceGradients({ usingGradient, setUsingGradient }) {\n  function handleChange(e) {\n    setUsingGradient(e.target.value);\n  }\n\n  return (\n    <div>\n      Gradient on{\" \"}\n      <select value={usingGradient.toString()} onChange={handleChange}>\n        <option value=\"all\">all</option>\n        <option value=\"my\">your</option>\n        <option value=\"their\">their</option>\n        <option value=\"no\">no</option>\n      </select>{\" \"}\n      pieces.\n    </div>\n  );\n}\n\nexport default PieceGradients;\n","function SiteTheme({ themeType, toggleTheme }) {\n  const capitalizedTheme =\n    themeType.charAt(0).toUpperCase() + themeType.slice(1);\n\n  return (\n    <div>\n      <button onClick={toggleTheme}>{capitalizedTheme}</button> theme.\n    </div>\n  );\n}\n\nexport default SiteTheme;\n","function SiteSound({ soundIsOn, toggleSound }) {\n  return (\n    <div>\n      Sound is <button onClick={toggleSound}>{soundIsOn ? \"on\" : \"off\"}</button>\n      .\n    </div>\n  );\n}\n\nexport default SiteSound;\n","import { useState } from \"react\";\n\nfunction CreateRoom({ createRoom }) {\n  const [restartMethodInput, setRestartMethodInput] = useState(\"alternate\");\n\n  function handleChange(e) {\n    setRestartMethodInput(e.target.value);\n  }\n\n  function handleClick(e) {\n    e.preventDefault();\n    createRoom(restartMethodInput);\n  }\n\n  return (\n    <div className=\"option\">\n      <h3>Create an Online Room</h3>\n      <p>\n        To play a friend remotely, create a room. You'll be given a code to\n        share with them.\n      </p>\n      <div>\n        Select who will go first in rematches:\n        <form>\n          {[\"Alternate\", \"Loser\", \"Winner\", \"Random\"].map((method) => {\n            return (\n              <label key={method}>\n                <input\n                  type=\"radio\"\n                  value={method.toLowerCase()}\n                  checked={restartMethodInput === method.toLowerCase()}\n                  onChange={handleChange}\n                />\n                {method}\n              </label>\n            );\n          })}\n          <button onClick={handleClick}>Create Room</button>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default CreateRoom;\n","import { useState } from \"react\";\n\nfunction JoinRoom({ joinRoom }) {\n  const [roomCodeInput, setRoomCodeInput] = useState(\"\");\n\n  function changeHandler(e) {\n    setRoomCodeInput(e.target.value.toUpperCase().trim());\n  }\n\n  function clickHandler(e) {\n    e.preventDefault();\n    if (roomCodeInput) {\n      joinRoom(roomCodeInput);\n    }\n  }\n\n  return (\n    <div className=\"option\">\n      <h3>Join an Online Room</h3>\n      <p>\n        If a friend has given you a room code, use that code to join their room.\n      </p>\n      <div>\n        Enter 4-character room code:\n        <form>\n          <input\n            type=\"text\"\n            value={roomCodeInput}\n            placeholder=\"paste room code\"\n            onChange={changeHandler}\n          />\n          <br />\n          <button onClick={clickHandler}>Join Room</button>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default JoinRoom;\n","function CreateMultiPlayer({ playLocally }) {\n  function handleClick(e) {\n    e.preventDefault();\n    playLocally();\n  }\n\n  return (\n    <div className=\"option\">\n      <h3>Local Multi-Player</h3>\n      <p>To play a friend on the same screen as you, start a local game.</p>\n      <form>\n        <button onClick={handleClick}>Play Locally</button>\n      </form>\n    </div>\n  );\n}\n\nexport default CreateMultiPlayer;\n","function CreateSinglePlayer({ playComputer }) {\n  function handleClick(e) {\n    e.preventDefault();\n    playComputer();\n  }\n\n  return (\n    <div className=\"option\">\n      <h3>Play Computer</h3>\n      <p>\n        If you don't have a friend to play against, there is a computer opponent\n        available.\n      </p>\n      <form>\n        <button onClick={handleClick}>Play Computer</button>\n      </form>\n    </div>\n  );\n}\n\nexport default CreateSinglePlayer;\n","// unfortunately, colour inputs don't recognize names like \"Red\"\nconst colours = [\n  \"#FF0000\", // Red\n  \"#FF69B4\", // HotPink\n  \"#FF8C00\", // DarkOrange\n  \"#FFD700\", // Gold\n  \"#FF00FF\", // Magenta\n  \"#228B22\", // ForestGreen\n  \"#0000FF\", // Blue\n  \"#8B4513\", // SaddleBrown\n  \"#C0C0C0\", // Silver\n];\nfunction getRandomColour() {\n  return colours[Math.floor(Math.random() * colours.length)];\n}\n\n// consumes RGF colour like \"#4535D5\"\n// NOTE: this actually just inverts the RGB digits... oops\nfunction oppositeColourOf(colour) {\n  // extract RGB\n  const r = parseInt(colour.substring(1, 3), 16) / 255;\n  const g = parseInt(colour.substring(3, 5), 16) / 255;\n  const b = parseInt(colour.substring(5, 7), 16) / 255;\n\n  // convert to HSL, complement, convert back to RGB\n  const [h, s, l] = rgbToHsl(r, g, b);\n  const newH = h > 0.5 ? h - 0.5 : h + 0.5;\n  const [newR, newG, newB] = hslToRgb(newH, s, 1 - l);\n  // above was originally (newH, s, l)\n\n  // put back together into string\n  return (\n    \"#\" +\n    pad(Math.round(newR * 255).toString(16)).toUpperCase() +\n    pad(Math.round(newG * 255).toString(16)).toUpperCase() +\n    pad(Math.round(newB * 255).toString(16)).toUpperCase()\n  );\n}\n\nfunction pad(hexStr) {\n  return hexStr.length === 2 ? hexStr : \"0\" + hexStr;\n}\nfunction rgbToHsl(r, g, b) {\n  const minVal = Math.min(r, g, b);\n  const maxVal = Math.max(r, g, b);\n  const delta = maxVal - minVal;\n  const sum = maxVal + minVal;\n  const avg = (maxVal + minVal) / 2;\n\n  if (delta === 0) {\n    /// this is grey\n    return [0, 0, avg];\n  }\n\n  const deltaR = ((maxVal - r) / 6 + delta / 2) / delta;\n  const deltaG = ((maxVal - g) / 6 + delta / 2) / delta;\n  const deltaB = ((maxVal - b) / 6 + delta / 2) / delta;\n\n  const l = avg;\n  const s = avg < 0.5 ? delta / sum : delta / (2 - sum);\n  const rawH =\n    r === maxVal\n      ? deltaB - deltaG\n      : g === maxVal\n      ? 1 / 3 + deltaR - deltaB\n      : b === maxVal\n      ? 2 / 3 + deltaG - deltaR\n      : \"N/A\";\n  const h = rawH < 0 ? rawH + 1 : rawH > 1 ? rawH - 1 : rawH;\n\n  return [h, s, l];\n}\n\nfunction hslToRgb(h, s, l) {\n  if (s === 0) {\n    // this is grey\n    return [l, l, l];\n  }\n\n  const v2 = l < 0.5 ? l * (1 + s) : l + s - s * l;\n  const v1 = 2 * l - v2;\n  return [help(v1, v2, h + 1 / 3), help(v1, v2, h), help(v1, v2, h - 1 / 3)];\n}\nfunction help(v1, v2, v3) {\n  const newV3 = v3 < 0 ? v3 + 1 : v3 > 1 ? v3 - 1 : v3;\n  if (6 * newV3 < 1) {\n    return v1 + (v2 - v1) * 6 * newV3;\n  } else if (2 * newV3 < 1) {\n    return v2;\n  } else if (3 * newV3 < 2) {\n    return v1 + (v2 - v1) * ((2 / 3 - newV3) * 6);\n  } else {\n    return v1;\n  }\n}\n\nexport { getRandomColour, oppositeColourOf };\n","import CreateRoom from \"./CreateRoom.js\";\nimport JoinRoom from \"./JoinRoom.js\";\n\nimport CreateMultiPlayer from \"./CreateMultiPlayer.js\";\nimport CreateSinglePlayer from \"./CreateSinglePlayer.js\";\n\nimport { useLobby } from \"./useLobby.js\";\n\nimport \"./lobby.css\";\n\nconst checkOccupancyFailMessage =\n  \"Could not successfully check room occupancy.\\nMay not be connected to the network.\";\n\nfunction Lobby({\n  setOpponent,\n  setPlayType,\n  setRoomCode,\n  setIsOwner,\n  setRestartMethod,\n  network,\n}) {\n  //// network setup\n\n  async function getRoomOccupancy(roomCode) {\n    try {\n      const room = await network.hereNow({ channels: [roomCode] });\n      return room.totalOccupancy;\n    } catch (error) {\n      alert(checkOccupancyFailMessage);\n      console.error(\"Couldn't get room occupancy.\", error);\n      throw error;\n    }\n  }\n\n  //// useLobby hook, agnostic to chosen network\n\n  const { createRoom, joinRoom, playLocally, playComputer } = useLobby(\n    setOpponent,\n    setPlayType,\n    setRoomCode,\n    setIsOwner,\n    setRestartMethod,\n    getRoomOccupancy\n  );\n\n  //// Return\n\n  return (\n    <div className=\"lobby\">\n      <h2>Lobby</h2>\n      <p>Welcome to the Connect 4 lobby.</p>\n\n      <CreateRoom createRoom={createRoom} />\n      <JoinRoom joinRoom={joinRoom} />\n      <CreateMultiPlayer playLocally={playLocally} />\n      <CreateSinglePlayer playComputer={playComputer} />\n    </div>\n  );\n}\n\nexport default Lobby;\n","import { getRandomColour } from \"./../Colours.js\";\n\nfunction useLobby(\n  setOpponent,\n  setPlayType,\n  setRoomCode,\n  setIsOwner,\n  setRestartMethod,\n  getRoomOccupancy\n) {\n  //// Helpers\n\n  async function generateUnusedRoomCode() {\n    // omit 0/O, 1/I/L just in case\n    const chars = \"ABCDEFGHJKMNPQRSTUVXYZ23456789\";\n\n    // loop: generate 4-digit code, check whether it is in use, if not then use\n    let roomCode = \"\";\n    let occupancy = -1;\n    try {\n      do {\n        roomCode = \"\";\n        for (let i = 0; i < 4; i++) {\n          roomCode += chars.charAt(Math.floor(Math.random() * chars.length));\n        }\n        occupancy = await getRoomOccupancy(roomCode);\n      } while (occupancy > 0);\n\n      return roomCode;\n    } catch (error) {\n      console.error(\"Couldn't generate room code.\", error);\n      throw error;\n    }\n  }\n\n  //// Externally accessible handlers\n\n  async function createRoom(restartMethod) {\n    try {\n      // randomly generate room code (make sure it doesn't already exist)\n      const generatedRoomCode = await generateUnusedRoomCode();\n      // set parameters for room\n      setIsOwner(true);\n      setRestartMethod(restartMethod);\n      setRoomCode(generatedRoomCode);\n      setPlayType(\"online\");\n    } catch (error) {\n      console.error(\"Couldn't create room.\", error);\n    }\n  }\n\n  async function joinRoom(roomCode) {\n    try {\n      const roomOccupancy = await getRoomOccupancy(roomCode);\n      if (roomOccupancy === 0) {\n        alert(\"No room with code \" + roomCode + \" currently exists.\");\n      } else if (roomOccupancy === 1) {\n        // set parameters for room -- will receive restartMethod via message later\n        setIsOwner(false);\n        setRestartMethod(null);\n        setRoomCode(roomCode);\n        setPlayType(\"online\");\n      } else {\n        alert(\"The room with code \" + roomCode + \" already has two players.\");\n      }\n    } catch (error) {\n      console.error(\"Couldn't join room.\", error);\n    }\n  }\n\n  function playLocally() {\n    // setup opponent (is null til now)\n    setOpponent({\n      name: \"Player II\",\n      colour: getRandomColour(),\n      type: \"local\",\n    });\n    // mount component\n    setPlayType(\"local\");\n  }\n\n  function playComputer() {\n    // setup opponent (is null til now)\n    setOpponent({\n      name: \"Computron 40 5000\",\n      colour: getRandomColour(),\n      type: \"computer\",\n    });\n    // mount component\n    setPlayType(\"computer\");\n  }\n\n  //// Return\n\n  return {\n    createRoom,\n    joinRoom,\n    playLocally,\n    playComputer,\n  };\n}\n\nexport { useLobby };\n","import \"./results.css\";\n\nfunction Results({ resultHistory, headings }) {\n  return (\n    <div className=\"results\">\n      <div className=\"result left side\">\n        <div>{headings[0]}:</div>\n        <div>{resultHistory.wins}</div>\n      </div>\n      <div className=\"result middle\">\n        <div>{headings[1]}:</div>\n        <div>{resultHistory.draws}</div>\n      </div>\n      <div className=\"result right side\">\n        <div>{headings[2]}:</div>\n        <div>{resultHistory.loses}</div>\n      </div>\n    </div>\n  );\n}\n\nexport default Results;\n","import Results from \"./../Game/Results.js\";\n\nimport \"./remoteHeader.css\";\n\n// TODO: NETWORK: add a \"confirm my connection\" button?\n\nfunction RemoteHeader({\n  roomCode,\n  isOwner,\n  hasOpponent,\n  restartMethod,\n  resultHistory,\n  kickOpponent,\n  closeRoom,\n  leaveRoom,\n}) {\n  const restartMethodMessage =\n    \"In this room, \" +\n    (restartMethod === \"random\"\n      ? \"the first player of subsequent games is selected randomly.\"\n      : restartMethod === \"alternate\"\n      ? \"players alternate playing first in subsequent games.\"\n      : // else it's \"winner\" or \"loser\"\n        \"the \" +\n        restartMethod +\n        \" of a game will go first for the next game. (In the event of a draw, the same player will go first.)\");\n\n  const copyToClipboard = async () => {\n    await navigator.clipboard.writeText(roomCode);\n    alert(\"Room code \" + roomCode + \" copied to clipboard.\");\n  };\n\n  return (\n    <>\n      {/* display W-D-L history against this opponent */}\n      {hasOpponent && (\n        <Results\n          resultHistory={resultHistory}\n          headings={[\"Wins\", \"Draws\", \"Loses\"]}\n        />\n      )}\n\n      {hasOpponent ? (\n        /* who is in control */\n        isOwner ? (\n          <p>You created and are in control of this room.</p>\n        ) : (\n          <p>Your opponent created and has control of this room.</p>\n        )\n      ) : /* waiting message & room code */\n      isOwner ? (\n        <p>\n          Waiting for an opponent to join your room. Share your room code{\" \"}\n          <button onClick={copyToClipboard}>{roomCode}</button> with a friend.\n        </p>\n      ) : (\n        <p>\n          Waiting for opponent information to be fetched. (If this message\n          persists, then something has gone wrong.).\n        </p>\n      )}\n\n      {/* explain who goes first for new games */}\n      {restartMethod && <p>{restartMethodMessage}</p>}\n\n      {/* options to close/leave room or kick opponent, as applicable */}\n      <div className={hasOpponent ? \"\" : \"exitRoom\"}>\n        {isOwner ? (\n          <button onClick={closeRoom}>Close Room</button>\n        ) : (\n          <button onClick={leaveRoom}>Leave Room</button>\n        )}\n        {isOwner && hasOpponent && (\n          <button onClick={kickOpponent}>Kick Opponent</button>\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default RemoteHeader;\n","import { useContext } from \"react\";\n\nimport { GradientContext, ThemeContext } from \"./../App.js\";\n\nimport { oppositeColourOf } from \"./../Colours.js\";\n\nimport \"./board.css\";\n\nfunction Board({\n  viewer,\n  positions,\n  columns,\n  isViewersTurn,\n  colours,\n  makeMove,\n}) {\n  const { foreground } = useContext(ThemeContext);\n  const rows = positions.length;\n  let tableRows = [];\n  // the first row goes on the bottom, visually\n  for (let r = rows - 1; r > -1; r--) {\n    tableRows.push(\n      <Row\n        key={r}\n        row={positions[r]}\n        columns={columns}\n        viewer={viewer}\n        isViewersTurn={isViewersTurn}\n        makeMove={makeMove}\n        colours={colours}\n      />\n    );\n  }\n\n  return (\n    <table className=\"board\" style={{ backgroundColor: foreground }}>\n      <tbody>{tableRows}</tbody>\n    </table>\n  );\n}\n\nfunction Row({ row, columns, viewer, isViewersTurn, makeMove, colours }) {\n  const usingGradient = useContext(GradientContext);\n\n  let rowCells = row.map(({ piece, wouldWin, isWinner }, col) => {\n    return (\n      <Cell\n        key={col}\n        handleClick={() => makeMove(col)}\n        colour={colours[piece]}\n        useGradient={\n          piece !== null &&\n          (usingGradient === \"all\" ||\n            (usingGradient === \"my\" && piece === 0) ||\n            (usingGradient === \"their\" && piece === 1))\n        }\n        isHighlight={isWinner}\n        isClickable={isViewersTurn && !columns[col].isFull}\n      />\n    );\n  });\n\n  return <tr>{rowCells}</tr>;\n}\n\nfunction Cell({ handleClick, colour, useGradient, isHighlight, isClickable }) {\n  // colours/styles -- bit of a mess\n  const { background, foreground } = useContext(ThemeContext);\n  const backgroundColor = colour || background;\n  const borderColor = isHighlight\n    ? oppositeColourOf(backgroundColor)\n    : backgroundColor;\n  const pieceStyle = { backgroundColor, borderColor };\n  const gradientPieceStyle = {\n    borderColor,\n    backgroundImage:\n      \"radial-gradient(\" + backgroundColor + \",\" + backgroundColor + \"70)\",\n  };\n\n  const cellClass = isClickable ? \"clickable cell\" : \"cell\";\n  const cellStyle = { borderColor: foreground };\n\n  return (\n    <td className={cellClass} style={cellStyle} onClick={handleClick}>\n      <span\n        className=\"piece\"\n        style={useGradient ? gradientPieceStyle : pieceStyle}\n      ></span>\n    </td>\n  );\n}\n\nexport default Board;\nexport { Row, Cell }; // for testing\n","import \"./gameFooter.css\";\n\nfunction GameFooter({\n  sharingScreen,\n  viewer,\n  isOwner,\n  names,\n  gameStatus,\n  winner,\n  toPlayNext,\n  forfeit,\n  startNewGame,\n  hasRestartChoice,\n}) {\n  // to display to viewer\n  function gameStatusMessage() {\n    if (sharingScreen) {\n      // sharing screen\n      switch (gameStatus) {\n        case \"won\":\n          return \"Congratulations \" + names[winner] + \", you won!\";\n        case \"forfeit\":\n          return (\n            names[1 - winner] +\n            \" forfeit the game -- \" +\n            names[winner] +\n            \" wins.\"\n          );\n        case \"draw\":\n          return \"It's a draw.\";\n        case \"ongoing\":\n          return \"It's \" + names[toPlayNext] + \"'s turn to play.\";\n        case \"waiting\":\n          return \"The game hasn't started yet.\";\n        default:\n          console.error(\"Error: \", gameStatus);\n          return \"Something has gone wrong. Apologies.\";\n      }\n    } else {\n      // not sharing screen\n      switch (gameStatus) {\n        case \"won\":\n          return winner === viewer ? \"Congratulations, you won!\" : \"You lost.\";\n        case \"forfeit\":\n          return winner === viewer\n            ? \"Your opponent has forfeit the game -- you win.\"\n            : \"You lost by forfeiting the game.\";\n        case \"draw\":\n          return \"It's a draw.\";\n        case \"ongoing\":\n          return viewer === toPlayNext\n            ? \"It's your turn to drop a piece.\"\n            : \"Waiting for your opponent to play.\";\n        case \"waiting\":\n          return \"The game hasn't started yet.\";\n        default:\n          console.error(\"Error: \", gameStatus);\n          return \"Something has gone wrong. Apologies.\";\n      }\n    }\n  }\n\n  const newGameText = gameStatus === \"waiting\" ? \"the game\" : \" a new game\";\n\n  //  displayed for viewer's point of view\n  return (\n    <div className=\"gameFooter\">\n      {/* explain what's going on with the game */}\n      <div>{gameStatusMessage()}</div>\n\n      {/* buttons for forfeiting or restarting, as applicable */}\n      <div>\n        {gameStatus === \"ongoing\" ? (\n          <button onClick={() => forfeit(viewer)}>Forfeit</button>\n        ) : isOwner ? (\n          hasRestartChoice ? (\n            <>\n              To start {newGameText}, select who will go first:{\" \"}\n              <button onClick={() => startNewGame(0)}>{names[0]}</button>\n              <button onClick={() => startNewGame(1)}>{names[1]}</button>\n            </>\n          ) : (\n            <>\n              Start {newGameText}: <button onClick={startNewGame}>Start</button>\n            </>\n          )\n        ) : (\n          <>Waiting for your opponent to start {newGameText}.</>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default GameFooter;\n","const primaryDirections = [\n  [0, 1], // right\n  [1, 1], // up-right\n  [1, 0], // up\n  [1, -1], // up-left\n];\n\n// provide full statistics for each position and each line (of length lineLen)\nexport function boardStats({ pieces, rows, cols, lineLen }) {\n  //// Calculations to do\n\n  // two \"matrices\"\n  let columns = []; // 1D: col\n  let positions = []; // 2D: row col\n  let lines = []; // 4D: row col deltaRow deltaCol\n\n  // lines: check isInBounds, piece counts when applicable, and if it's a winner\n  for (let r = 0; r < rows; r++) {\n    let row = [];\n    for (let c = 0; c < cols; c++) {\n      let col = [{}, {}];\n      primaryDirections.forEach(([deltaR, deltaC], i) => {\n        col[deltaR][deltaC] = basicLineStats(r, c, deltaR, deltaC);\n      });\n      row.push(col);\n    }\n    lines.push(row);\n  }\n\n  // positions: who has played here, have they won here; is the column full,\n  //  and which players would win by playing here\n  for (let r = 0; r < rows; r++) {\n    let row = [];\n    for (let c = 0; c < cols; c++) {\n      row.push(basicPositionStats(r, c));\n    }\n    positions.push(row);\n  }\n\n  // lines: find fill (full, fillable, unfillable)\n  for (let r = 0; r < rows; r++) {\n    for (let c = 0; c < cols; c++) {\n      primaryDirections.forEach(([deltaR, deltaC], i) => {\n        let line = lines[r][c][deltaR][deltaC];\n        if (line.isInBounds) {\n          let fill = \"fillable\";\n          if (line.counts[0] + line.counts[1] === lineLen) {\n            fill = \"full\";\n          } else {\n            // check whether there's a spot below any spot in this line which\n            //  both players would win in\n            for (let offset = 0; offset < lineLen; offset++) {\n              // a spot on the line\n              let [r2, c2] = [r + offset * deltaR, c + offset * deltaC];\n              for (let subR2 = 0; subR2 < r2; subR2++) {\n                // a spot below the line\n                const position = positions[subR2][c2];\n                if (position.isHot) {\n                  fill = \"unfillable\";\n                }\n              }\n            }\n          }\n          line.fill = fill;\n        }\n      });\n    }\n  }\n\n  // column stats: isFull, firstOpenRow\n  for (let col = 0; col < cols; col++) {\n    for (let row = 0; row < rows; row++) {\n      if (positions[row][col].piece === null) {\n        columns.push({ isFull: false, firstOpenRow: row });\n        break;\n      } else if (row === rows - 1) {\n        columns.push({ isFull: true });\n      }\n    }\n  }\n\n  //// External functions\n\n  function linesThrough(r, c) {\n    let result = [];\n    // iterate over primary directions\n    primaryDirections.forEach(([deltaR, deltaC]) => {\n      // iterate over potential lines in that direction\n      for (let offset = 1 - lineLen; offset <= 0; offset++) {\n        // start of potential line\n        const [r2, c2] = [r + offset * deltaR, c + offset * deltaC];\n        if (\n          positionInBounds(r2, c2) &&\n          lines[r2][c2][deltaR][deltaC].isInBounds\n        ) {\n          result.push(lines[r2][c2][deltaR][deltaC]);\n        }\n      }\n    });\n\n    return result;\n  }\n\n  function positionsOn(r, c, dR, dC) {\n    let result = [];\n    if (lines[r][c][dR][dC].isInBounds) {\n      for (let pos = 0; pos < lineLen; pos++) {\n        result.push(positions[r + pos * dR][c + pos * dC]);\n      }\n    }\n    return result;\n  }\n\n  //// Internal Helper functions\n\n  // is [r,c] actually on the board\n  function positionInBounds(r, c) {\n    return 0 <= r && r < rows && 0 <= c && c < cols;\n  }\n\n  // isInBounds (boolean), isWinner (boolean), piece counts\n  function basicLineStats(r, c, deltaR, deltaC) {\n    let counts = [0, 0];\n    // check each spot\n    for (let ind = 0; ind < lineLen; ind++) {\n      // given position on line...\n      const [r2, c2] = [r + ind * deltaR, c + ind * deltaC];\n      // ... is it in bounds?\n      if (!positionInBounds(r2, c2)) {\n        // a position on the line is out of bounds, return failure\n        return { isInBounds: false };\n      }\n      // ... what piece is it in, if any?\n      if (pieces[r2][c2] !== null) {\n        counts[pieces[r2][c2]] += 1;\n      }\n    }\n    const isWinner = counts[0] === lineLen || counts[1] === lineLen;\n    return { isInBounds: true, isWinner, counts };\n  }\n\n  // is column full (boolean), piece (player index),\n  //  would win by playing here (array of index), isWinner (boolean)\n  function basicPositionStats(r, c) {\n    const piece = pieces[r][c];\n    const wouldWin = checkWouldWin(r, c);\n    const isHot = wouldWin.every((i) => i);\n    const isWinner = checkWinner(r, c);\n    return { row: r, col: c, piece, wouldWin, isHot, isWinner };\n  }\n\n  // check each line to see if it's been won\n  function checkWinner(r, c) {\n    if (pieces[r][c] === null) {\n      // no need to check all lines if there's no piece here\n      return false;\n    }\n    // check all lines going through [r, c]\n    for (let ind = 0; ind < primaryDirections.length; ind++) {\n      const [deltaR, deltaC] = primaryDirections[ind];\n      for (let offset = 1 - lineLen; offset <= 0; offset++) {\n        // a spot to start a line which goes through [r, c]\n        const [r2, c2] = [r + offset * deltaR, c + offset * deltaC];\n        if (positionInBounds(r2, c2)) {\n          // said line\n          const line = lines[r2][c2][deltaR][deltaC];\n          if (line.isInBounds && line.isWinner) {\n            // found a winning line\n            return true;\n          }\n        }\n      }\n    }\n    // didn't find a winner\n    return false;\n  }\n\n  // check each line to see if it's the only missing piece to win\n  function checkWouldWin(r, c) {\n    let wouldWin = [false, false];\n    // only bother checking each line if nobody has played here yet\n    if (pieces[r][c] === null) {\n      linesThrough(r, c).forEach(({ counts }) => {\n        if (counts[0] === lineLen - 1) {\n          wouldWin[0] = true;\n        } else if (counts[1] === lineLen - 1) {\n          wouldWin[1] = true;\n        }\n      });\n    }\n    return wouldWin;\n  }\n\n  return { positions, lines, columns, linesThrough, positionsOn };\n}\n","import { boardStats as getBoardStats } from \"./../Game/boardStats.js\";\nimport { useState, useReducer } from \"react\";\n\n//// Generic constants helpers\n\n// create empty tables (for initial states, and on resets)\nfunction emptyTable(rows, cols, val = null) {\n  let table = [];\n  for (let r = 0; r < rows; r++) {\n    let row = [];\n    for (let c = 0; c < cols; c++) {\n      row.push(val);\n    }\n    table.push(row);\n  }\n  return table;\n}\n\n//// Reducers\n\nfunction gameStatesReducer(state, action) {\n  let newState = { ...state };\n  switch (action.type) {\n    case \"reset\":\n      return { moveHistory: [], pieces: emptyTable(action.rows, action.cols) };\n    case \"move\":\n      let { player, row, col } = action;\n      newState.moveHistory.push({ player, row, col });\n      newState.pieces[action.row][action.col] = action.player;\n      return newState;\n    case \"undo\":\n      // NOTE: undo case currently unused\n      if (state.moveHistory.length === 0) {\n        return state;\n      } else {\n        newState.moveHistory.pop();\n        newState[action.row][action.col] = null;\n        return newState;\n      }\n    default:\n      console.error(\"gameStatesReducer has no matching case: \", action);\n      return state;\n  }\n}\n\n//// The actual hook\n\n// TODO: LATER: TIME_LIMIT: option to add time limit to turns\n// TODO: MAYBE: UNDO: return an undo function\n\nfunction useGame(rows = 6, cols = 7, lineLen = 4) {\n  //// States\n\n  // who goes first\n  const [toPlayFirst, setToPlayFirst] = useState(null);\n\n  // waiting for first game to start?\n  const [waiting, setWaiting] = useState(true);\n\n  // who has forfeit (player index, or null)\n  const [forfeiter, setForfeiter] = useState(null);\n\n  // pieces and moveHistory wrapped in object\n  const [{ moveHistory, pieces }, dispatchToGame] = useReducer(\n    gameStatesReducer,\n    {\n      moveHistory: [],\n      pieces: emptyTable(rows, cols),\n    }\n  );\n\n  //// Constants\n\n  // generate data about all positions and lines on the board\n  const keyAttributes = { pieces, rows, cols, lineLen };\n  const boardStats = getBoardStats(keyAttributes);\n  const { positions, columns } = boardStats;\n\n  // previous move: { player, row, col } (or null)\n  const prevMove =\n    moveHistory.length === 0 ? null : moveHistory[moveHistory.length - 1];\n\n  // check if the board is won\n  const boardIsWon =\n    moveHistory.length > 0 && positions[prevMove.row][prevMove.col].isWinner;\n\n  // check if the board is full\n  const boardIsFull = columns.every((col) => col.isFull);\n\n  // based purely on the board (not forfeit); ongoing, won, or draw\n  const boardStatus = boardIsWon // check the board for a win\n    ? \"won\" // found win\n    : boardIsFull // otherwise, check the board for a draw\n    ? \"draw\" // found draw\n    : \"ongoing\"; // didn't find draw\n\n  // takes into account possible forfeit: ongoing, won, draw, or forfeit\n  const gameStatus = waiting // check whether we're waiting to start\n    ? \"waiting\" // if so\n    : forfeiter !== null // if not, check for feifeit\n    ? \"forfeit\" // if so\n    : boardStatus; // otherwise, default to boardStatus\n\n  // index of winning player (via game play for via forfeit), or null\n  const winner =\n    gameStatus === \"forfeit\" // check for forfeit\n      ? 1 - forfeiter // if so, other player won\n      : gameStatus === \"won\" // otherwise, check for win\n      ? prevMove.player // if so, then most recent player won\n      : null; // otherwise, there's no winner\n\n  // index of player to play next move, or null if game is not ongoing\n  const toPlayNext =\n    gameStatus !== \"ongoing\"\n      ? null\n      : moveHistory.length === 0\n      ? toPlayFirst\n      : 1 - prevMove.player;\n\n  //// Externally accessible functions\n\n  // full reset of states\n  function resetGame() {\n    setWaiting(true);\n    setForfeiter(null);\n    setToPlayFirst(null);\n    dispatchToGame({ type: \"reset\", rows, cols });\n  }\n\n  // starts a game (from reset/initial state or from old game)\n  function startGame(option) {\n    // partial reset\n    setForfeiter(null);\n    dispatchToGame({ type: \"reset\", rows, cols });\n\n    // start\n    setToPlayFirst((prev) => {\n      const randomPlayer = Math.floor(Math.random() * 2);\n      if (prev === null) {\n        // if there was no previous game\n        return option === 0 ? 0 : option === 1 ? 1 : randomPlayer;\n      }\n      // otherwise, there was a previous game\n      switch (option) {\n        case \"alternate\":\n          return 1 - prev;\n        case \"winner\":\n          return winner !== null ? winner : prev;\n        case \"loser\":\n          return winner !== null ? 1 - winner : prev;\n        case \"random\":\n          return randomPlayer;\n        case 0:\n          return 0;\n        case 1:\n          return 1;\n        default:\n          console.error(\"Couldn't select first player.\", option);\n          return 0;\n      }\n    });\n    setWaiting(false);\n  }\n\n  // given out to allow component to (attempt to) place a piece\n  function placePiece(col, player) {\n    const column = columns[col];\n    // only proceed if move is valid\n    if (gameStatus === \"ongoing\" && player === toPlayNext && !column.isFull) {\n      const row = column.firstOpenRow;\n      dispatchToGame({ type: \"move\", player, row, col });\n    }\n  }\n\n  //// Return\n\n  return {\n    gameStatus,\n    prevMove,\n    toPlayFirst,\n    toPlayNext,\n    winner,\n    resetGame,\n    startGame,\n    placePiece,\n    setForfeiter,\n    keyAttributes,\n    boardStats,\n  };\n}\n\nexport { useGame };\n","export default __webpack_public_path__ + \"static/media/water_dropwav-6707.104e70a9.mp3\";","export default __webpack_public_path__ + \"static/media/good-6081.4c04bbc5.mp3\";","export default __webpack_public_path__ + \"static/media/failure-drum-sound-effect-2mp3-7184.7b134939.mp3\";","export default __webpack_public_path__ + \"static/media/mixkit-retro-game-notification-212.b222ebf0.wav\";","import { useEffect, useContext } from \"react\";\n\nimport yourTurnSound from \"./../sounds/water_dropwav-6707.mp3\";\nimport winSound from \"./../sounds/good-6081.mp3\";\nimport loseSound from \"./../sounds/failure-drum-sound-effect-2mp3-7184.mp3\";\nimport drawSound from \"./../sounds/mixkit-retro-game-notification-212.wav\";\n\n// TODO: MAYBE: SOUND: on forfeit with sharingScreen, play lose sound?\n\nimport { SoundContext } from \"./../App.js\";\n\nfunction useGameSoundEffects(sharingScreen, gameStatus, toPlayNext, winner) {\n  //// Sound\n\n  const { setSoundToPlay } = useContext(SoundContext);\n\n  //// Effects\n\n  // trigger win/lose sound effect\n  useEffect(() => {\n    if (winner === 0) {\n      setSoundToPlay(winSound);\n    } else if (winner === 1) {\n      setSoundToPlay(sharingScreen ? winSound : loseSound);\n    }\n  }, [winner, setSoundToPlay, sharingScreen]);\n\n  // trigger draw sound effect\n  useEffect(() => {\n    if (gameStatus === \"draw\") {\n      setSoundToPlay(drawSound);\n    }\n  }, [gameStatus, setSoundToPlay]);\n\n  // trigger your turn sound effect\n  useEffect(() => {\n    if (toPlayNext === 0 && !sharingScreen) {\n      setSoundToPlay(yourTurnSound);\n    }\n  }, [toPlayNext, setSoundToPlay, sharingScreen]);\n}\n\nexport { useGameSoundEffects };\n","export default __webpack_public_path__ + \"static/media/success-1-6297.fd2c2fea.mp3\";","export default __webpack_public_path__ + \"static/media/chime-sound-7143.09264db5.mp3\";","export default __webpack_public_path__ + \"static/media/notification-sound-7062.d73a4897.mp3\";","export default __webpack_public_path__ + \"static/media/fist-punch-or-kick-7171.1d430a44.mp3\";","export default __webpack_public_path__ + \"static/media/power-down-7103.2164432c.mp3\";","import { useReducer, useEffect, useCallback } from \"react\";\n\nfunction reduceMessageQueue(state, action) {\n  const newState = [...state];\n  switch (action.type) {\n    case \"add\":\n      newState.push(action.message);\n      break;\n    case \"remove\":\n      newState.shift();\n      break;\n    default:\n      console.error(\"No match for reduceMessageQueue.\", action);\n      break;\n  }\n  return newState;\n}\n\nfunction useReceiveMessages(\n  network,\n  roomCode,\n  uuid,\n  hasOpponent,\n  setOpponent,\n  resetRoom,\n  startGame,\n  placePiece,\n  setForfeiter,\n  setRestartMethod,\n  unmountRoom\n) {\n  //// Constants\n\n  // message queue\n  const [incomingMessageQueue, dispatchIncomingMessageQueue] = useReducer(\n    reduceMessageQueue,\n    []\n  );\n\n  //// Functions\n\n  // queue message\n  const queueIncomingMessage = useCallback((message) => {\n    dispatchIncomingMessageQueue({ type: \"add\", message });\n  }, []);\n  // act on message\n  function handleMessage(message) {\n    switch (message.type) {\n      case \"restartMethod\":\n        setRestartMethod(message.restartMethod);\n        break;\n      case \"playerInfo\":\n        setOpponent((opp) => {\n          const name = message.name || opp.name;\n          const colour = message.colour || opp.colour;\n          const type = \"remote\";\n          return { name, colour, type };\n        });\n        break;\n\n      // room is relative to player, so 1 means opponent and incoming indices\n      //  are flipped as they are from opponent's view\n      case \"start\":\n        startGame(1 - message.toPlayFirst);\n        break;\n      case \"move\":\n        placePiece(message.col, 1);\n        break;\n      case \"forfeit\":\n        setForfeiter(1);\n        break;\n\n      case \"kick\":\n        alert(\"The owner of the room kicked you out.\");\n        unmountRoom();\n        break;\n      case \"close\":\n        alert(\"The owner of the room left and so the room has closed.\");\n        unmountRoom();\n        break;\n\n      case \"leave\":\n        if (hasOpponent) {\n          alert(\"Your opponent left.\");\n          resetRoom();\n        }\n        break;\n      default:\n        console.error(\"Unhandled message.\", message);\n        break;\n    }\n  }\n\n  //// Effects\n\n  // if there are incoming messages, act on the first one (oldest)\n  useEffect(() => {\n    if (incomingMessageQueue.length > 0) {\n      if (incomingMessageQueue[0].uuid !== uuid) {\n        // don't act on your own messages\n        handleMessage(incomingMessageQueue[0]);\n      }\n      dispatchIncomingMessageQueue({ type: \"remove\" });\n    }\n  });\n\n  // PROBLEM: TODO: are await and try-catches necessary for (un)subscribing?\n\n  // (un)subscribe to/from Room's channel\n  // PROBLEM: won't run if browser window/tab is closed\n  useEffect(() => {\n    network.subscribe({\n      channels: [roomCode],\n      withPresence: true,\n    });\n\n    return function unsubscribe() {\n      network.unsubscribe({ channels: [roomCode] });\n    };\n    // none will change while Room is mounted\n  }, [network, roomCode, unmountRoom]);\n\n  // PROBLEM: TODO: are await and try-catches necessary for (un)listening?\n\n  // setup listener for messages\n  // PROBLEM: won't run if browser window/tab is closed\n  useEffect(() => {\n    function handleMessage(event) {\n      queueIncomingMessage(event.message);\n    }\n    const listener = { message: handleMessage };\n\n    network.addListener(listener);\n\n    return function cleanupListener() {\n      network.removeListener(listener);\n    };\n    // none will change while Room is mounted\n  }, [network, queueIncomingMessage, unmountRoom]);\n}\n\nexport { useReceiveMessages };\n","import { useReducer, useEffect, useCallback } from \"react\";\n\n//// Reducers & initial states\n\nconst initialResults = { wins: 0, draws: 0, loses: 0 };\n\nfunction resultReducer(state, action) {\n  switch (action.type) {\n    case \"reset\":\n      return initialResults;\n    default:\n      // win, draw, or lose\n      let newState = { ...state };\n      newState[action.type + \"s\"] += 1;\n      return newState;\n  }\n}\n\n//// Hook\n\nfunction useResults(gameStatus, winner, hasOpponent = true) {\n  //// Constants\n\n  const [resultHistory, dispatchResult] = useReducer(\n    resultReducer,\n    initialResults\n  );\n\n  //// Functions\n\n  const resetResults = useCallback(() => {\n    dispatchResult({ type: \"reset\" });\n  }, []);\n\n  //// Effects\n\n  // at end of game, update the W-D-L tally\n  useEffect(() => {\n    if (winner === 0) {\n      dispatchResult({ type: \"win\" });\n    } else if (winner === 1) {\n      dispatchResult({ type: \"lose\" });\n    }\n  }, [winner]);\n  useEffect(() => {\n    if (gameStatus === \"draw\") {\n      dispatchResult({ type: \"draw\" });\n    }\n  }, [gameStatus]);\n\n  // if the opponent leaves, reset\n  useEffect(() => {\n    if (!hasOpponent) {\n      resetResults();\n    }\n    // resetResults never changes\n  }, [hasOpponent, resetResults]);\n\n  //// Return\n\n  return { resultHistory, resetResults };\n}\n\nexport { useResults };\n","import { useGame } from \"./../Game/useGame.js\";\nimport { useGameSoundEffects } from \"./../Game/useGameSoundEffects.js\";\nimport { useRoomSoundEffects } from \"./useRoomSoundEffects.js\";\nimport { useSendMessages } from \"./useSendMessages.js\";\nimport { useReceiveMessages } from \"./useReceiveMessages.js\";\nimport { useResults } from \"./../Game/useResults.js\";\n\n// TODO: TEST: useRoom: create tests for this hook (and all sub-hooks)\n\nfunction useRoom(\n  network,\n  roomCode,\n  player,\n  isOwner,\n  opponent,\n  setOpponent,\n  restartMethod,\n  setRestartMethod,\n  unmountRoom\n) {\n  // is an opponent present?\n  const hasOpponent = opponent !== null;\n\n  //// custom hooks\n\n  // game (& board)\n  const {\n    boardStats,\n    gameStatus,\n    prevMove,\n    toPlayFirst,\n    toPlayNext,\n    winner,\n    resetGame,\n    startGame,\n    placePiece,\n    setForfeiter,\n  } = useGame();\n\n  // game sound effects\n  useGameSoundEffects(false, gameStatus, toPlayNext, winner);\n\n  // room sound effects (PROBLEM: can't detect kick)\n  const { playKickSound } = useRoomSoundEffects(isOwner, hasOpponent);\n\n  // network\n\n  // send messages\n  useSendMessages(\n    network,\n    roomCode,\n    player,\n    isOwner,\n    hasOpponent,\n    gameStatus,\n    prevMove,\n    toPlayFirst,\n    winner,\n    restartMethod\n  );\n\n  // receive messages\n  useReceiveMessages(\n    network,\n    roomCode,\n    player.uuid,\n    hasOpponent,\n    setOpponent,\n    resetRoom,\n    startGame,\n    placePiece,\n    setForfeiter,\n    setRestartMethod,\n    unmountRoom\n  );\n\n  // W-D-L history of games played\n  const { resultHistory } = useResults(gameStatus, winner, hasOpponent);\n\n  //// Helper functions\n\n  // will only be called by owner\n  function resetRoom() {\n    setOpponent(null);\n    resetGame();\n  }\n\n  //// Externally available functions, for this player's actions\n\n  function startNewGame() {\n    startGame(restartMethod);\n  }\n\n  function makeMove(col) {\n    // only act if it's your turn\n    if (toPlayNext === 0) {\n      placePiece(col, 0);\n    }\n  }\n\n  // TODO: MAYBE: PERMAKICK: add via uuid-check (not perfect) ??\n  // TODO: MAYBE: use permakick list to play kick sound ??\n\n  function kickOpponent() {\n    resetRoom();\n    playKickSound();\n  }\n\n  //// Return\n\n  return {\n    resultHistory,\n    boardStats,\n    gameStatus,\n    winner,\n    toPlayNext,\n    startNewGame,\n    makeMove,\n    forfeit: setForfeiter,\n    kickOpponent,\n  };\n}\n\nexport { useRoom };\n","import { useEffect, useContext } from \"react\";\n\nimport createRoomSound from \"./../sounds/success-1-6297.mp3\";\nimport joinRoomSound from \"./../sounds/good-6081.mp3\";\nimport playerJoinSound from \"./../sounds/chime-sound-7143.mp3\";\nimport playerLeaveSound from \"./../sounds/notification-sound-7062.mp3\";\nimport kickOpponentSound from \"./../sounds/fist-punch-or-kick-7171.mp3\";\nimport closeRoomSound from \"./../sounds/power-down-7103.mp3\";\nimport leaveRoomSound from \"./../sounds/notification-sound-7062.mp3\";\n\nimport { SoundContext } from \"./../App.js\";\n\nfunction useRoomSoundEffects(isOwner, hasOpponent) {\n  //// Sound\n\n  const { setSoundToPlay } = useContext(SoundContext);\n\n  //// Effects\n\n  // NOTE: TODO: unfortunately, the order of these useEffects matters\n  // the join/leave sounds will be overriden by create/join/leave/close sounds\n\n  // for owner when 2nd player joins or leaves -- but not on initial render\n  useEffect(() => {\n    if (isOwner) {\n      setSoundToPlay(hasOpponent ? playerJoinSound : playerLeaveSound);\n    }\n    // only hasOpponent changes\n  }, [setSoundToPlay, isOwner, hasOpponent]);\n\n  // on mount and unmount\n  useEffect(() => {\n    setSoundToPlay(isOwner ? createRoomSound : joinRoomSound);\n    return function cleanup() {\n      setSoundToPlay(isOwner ? closeRoomSound : leaveRoomSound);\n    };\n    // none will change while Room is mounted\n  }, [setSoundToPlay, isOwner]);\n\n  //// Return functions\n\n  function playKickSound() {\n    setSoundToPlay(kickOpponentSound);\n  }\n\n  //// Return\n\n  return { playKickSound };\n}\n\nexport { useRoomSoundEffects };\n","import { useEffect, useCallback } from \"react\";\n\nfunction useSendMessages(\n  network,\n  roomCode,\n  player,\n  isOwner,\n  hasOpponent,\n  gameStatus,\n  prevMove,\n  toPlayFirst,\n  winner,\n  restartMethod\n) {\n  //// sending/publishing setup\n\n  // may need modifying if a new network replaces pubnub\n  const publishMessage = useCallback(\n    async (message) => {\n      try {\n        await network.publish({\n          message: { ...message, uuid: player.uuid },\n          channel: roomCode,\n        });\n      } catch (error) {\n        console.error(\"Couldn't publish message.\", error);\n        alert(\n          \"Could not send '\" +\n            message.type +\n            \"' message to opponent.\\nYou may be out of sync with your opponent.\\nConsider closing the room and creating a new one, if you haven't already.\"\n        );\n      }\n    },\n    // none will change until Room unmounts\n    [network, roomCode, player.uuid]\n  );\n\n  //// Room info\n\n  // send name/colour on own join, on opponent join, and when changed\n  useEffect(() => {\n    if (hasOpponent || !isOwner) {\n      publishMessage({\n        type: \"playerInfo\",\n        name: player.name,\n        colour: player.colour,\n      });\n    }\n    // only hasOpponent and player will change\n  }, [publishMessage, isOwner, hasOpponent, player.name, player.colour]);\n\n  // send restartMethod when opponent joins your room\n  useEffect(() => {\n    if (isOwner && hasOpponent) {\n      publishMessage({ type: \"restartMethod\", restartMethod });\n    }\n    // only hasOpponent will change when isOwner\n  }, [publishMessage, isOwner, hasOpponent, restartMethod]);\n\n  //// Gameplay\n\n  // send toPlayFirst when you start a new game\n  useEffect(() => {\n    if (isOwner && gameStatus === \"ongoing\") {\n      publishMessage({ type: \"start\", toPlayFirst });\n    }\n    // others won't change while gameStatus is ongoing\n  }, [publishMessage, isOwner, gameStatus, toPlayFirst]);\n\n  // send move when you make one\n  useEffect(() => {\n    if (prevMove && prevMove.player === 0) {\n      publishMessage({ type: \"move\", col: prevMove.col });\n    }\n    // only prevMove changes\n  }, [publishMessage, prevMove]);\n\n  // send forfeit message when you forfeit\n  useEffect(() => {\n    if (gameStatus === \"forfeit\" && winner === 1) {\n      publishMessage({ type: \"forfeit\" });\n    }\n    // others won't change while gameStatus is forfeit\n  }, [publishMessage, gameStatus, winner]);\n\n  //// Cleanup\n\n  // send kick when opponent becomes null\n  // (if they weren't kicked they'll be gone already so nobody gets the message)\n  useEffect(() => {\n    if (isOwner && !hasOpponent) {\n      publishMessage({ type: \"kick\" });\n    }\n    // only hasOpponent changes\n  }, [publishMessage, isOwner, hasOpponent]);\n\n  // send close or leave on unmount of Room\n  // PROBLEM: won't run if browser window/tab is closed\n  useEffect(() => {\n    return function cleanup() {\n      publishMessage({ type: isOwner ? \"close\" : \"leave\" });\n    };\n    // none of these will change while Room is mounted\n  }, [isOwner, publishMessage]);\n}\n\nexport { useSendMessages };\n","import RemoteHeader from \"./RemoteHeader.js\";\nimport Board from \"./../Game/Board.js\";\nimport GameFooter from \"./../Game/GameFooter.js\";\n\nimport { useRoom } from \"./useRoom.js\";\n\n// the room is seen from the current player's view\n//  each player has their own instantiation of the 'shared' room\n\nfunction Room({\n  roomCode,\n  player,\n  isOwner,\n  opponent,\n  setOpponent,\n  restartMethod,\n  setRestartMethod,\n  unmountRoom,\n  network,\n}) {\n  //// useRoom hook\n\n  const {\n    resultHistory,\n    boardStats,\n    gameStatus,\n    winner,\n    toPlayNext,\n    startNewGame,\n    makeMove,\n    forfeit,\n    kickOpponent,\n  } = useRoom(\n    network,\n    roomCode,\n    player,\n    isOwner,\n    opponent,\n    setOpponent,\n    restartMethod,\n    setRestartMethod,\n    unmountRoom\n  );\n  const { positions, columns } = boardStats;\n\n  //// Return\n\n  return (\n    <>\n      <RemoteHeader\n        roomCode={roomCode}\n        isOwner={isOwner}\n        hasOpponent={opponent !== null}\n        restartMethod={restartMethod}\n        resultHistory={resultHistory}\n        kickOpponent={kickOpponent}\n        closeRoom={unmountRoom}\n        leaveRoom={unmountRoom}\n      />\n      {opponent && (\n        <Board\n          viewer={0}\n          positions={positions}\n          columns={columns}\n          isViewersTurn={0 === toPlayNext}\n          colours={[player.colour, opponent.colour]}\n          makeMove={makeMove}\n        />\n      )}\n      {opponent && (\n        <GameFooter\n          sharingScreen={false}\n          viewer={0}\n          isOwner={isOwner}\n          names={[player.name, opponent.name]}\n          gameStatus={gameStatus}\n          winner={winner}\n          toPlayNext={toPlayNext}\n          forfeit={forfeit}\n          startNewGame={startNewGame}\n          hasRestartChoice={false}\n        />\n      )}\n    </>\n  );\n}\n\nexport default Room;\n","import Results from \"./../Game/Results.js\";\n\nfunction LocalHeader({ sharingScreen, names, resultHistory, unmount }) {\n  const textAboutOpponent = sharingScreen\n    ? \"You're playing locally with a friend on the same screen.\"\n    : \"You're playing against the computer.\";\n  const headings = sharingScreen\n    ? [names[0] + \" Wins\", \"Draws\", names[1] + \" Wins\"]\n    : [\"Wins\", \"Draws\", \"Loses\"];\n\n  return (\n    <div>\n      <Results resultHistory={resultHistory} headings={headings} />\n      <p>{textAboutOpponent}</p>\n      <button onClick={unmount}>Return to Lobby</button>\n    </div>\n  );\n}\n\nexport default LocalHeader;\n","import { useState, useEffect } from \"react\";\n\n// fiddle around with these parameters for artificially delayed play time\nconst maxThinkTime = 3000;\nconst minThinkTime = 500;\nconst randomFactorRange = 500;\n\n// fiddle around with these parameters for line scores\nfunction scoreOwnLine(pieceCount, lineLen) {\n  // linear, with exceptions at each extreme\n  const baseScore = 2 * pieceCount;\n  const bonus = pieceCount < 2 ? 0 : pieceCount < lineLen - 2 ? 1 : 3;\n  return baseScore + bonus;\n}\nfunction scoreOppLine(pieceCount, lineLen) {\n  // linear, with exceptions at each extreme\n  const baseScore = 2 * pieceCount - 1;\n  const bonus = pieceCount < 2 ? 0 : pieceCount < lineLen - 2 ? 1 : 3;\n  return baseScore + bonus;\n}\n\n// only does anything if active, and active never changes while mounted\nfunction useComputerPlayer(\n  active,\n  computerIndex,\n  computersTurn,\n  dropInCol,\n  forfeit,\n  keyAttributes,\n  boardStats\n) {\n  //// States\n\n  // flag indicating whether a move needs to be made\n  const [playNow, setPlayNow] = useState(false);\n\n  //// Constants\n\n  const { rows, cols, lineLen } = keyAttributes;\n  // just down for vertical, and all possiblilities for 3 other directions\n  const maxNotableLinesThroughPosition = 3 * lineLen + 1;\n\n  // board info from useGame hook\n  const { positions, columns, linesThrough } = boardStats;\n  const piecesPlayed = (() => {\n    let ans = 0;\n    columns.forEach(\n      ({ isFull, firstOpenRow }) => (ans += isFull ? rows : firstOpenRow)\n    );\n    return ans;\n  })();\n\n  // array of scores of each column; used for nextMove and thinkTime\n  const scores = columns.slice().map(calculateScore);\n\n  // col index to play in next\n  const nextMove = getNextMove(scores);\n\n  // timeout cmomputer will use\n  const thinkTime = getThinkTime(scores);\n\n  //// Helpers\n\n  // -1 for invalid play, otherwise a positive score\n  function calculateScore(col, c) {\n    if (col.isFull) {\n      return -1;\n    }\n\n    // column is not full; tally the types of lines through this position\n    const r = col.firstOpenRow;\n    let lineTypeCounts = {\n      empty: 0,\n      dead: 0, // impossible for anyone to use to win\n      self: new Array(lineLen).fill(0), // ith: i of own pieces, 0 of opp\n      opp: new Array(lineLen).fill(0), //ith: 0 of own pieces, i of opp\n    };\n    linesThrough(r, c).forEach((line) => addLineType(lineTypeCounts, line));\n\n    // booleans\n    const wouldWin = lineTypeCounts[\"self\"][lineLen - 1] > 0;\n    const wouldBlockOppWin = lineTypeCounts[\"opp\"][lineLen - 1] > 0;\n    const oppCouldWinOnTop =\n      r < rows - 1 && positions[r + 1][c].wouldWin[1 - computerIndex];\n    const oppCouldBlockWinOnTop =\n      r < rows - 1 && positions[r + 1][c].wouldWin[computerIndex];\n    // const wouldSetupSelfForLater = lineTypeCounts[\"self\"][lineLen - 2] > 0;\n    // const wouldBlockOppSetupForLater = lineTypeCounts[\"opp\"][lineLen - 2] > 0;\n\n    const elseScoreUpperBound = Math.max(\n      3,\n      maxNotableLinesThroughPosition * (lineLen - 1)\n    );\n\n    // given above booleans, assign a score to this column\n    if (wouldWin) {\n      return elseScoreUpperBound * 3;\n    } else if (wouldBlockOppWin) {\n      return elseScoreUpperBound * 2;\n    } else if (oppCouldWinOnTop) {\n      return 1;\n    } else if (oppCouldBlockWinOnTop) {\n      return 2;\n    } else {\n      // empty is worth 1\n      let score = lineTypeCounts[\"empty\"];\n      lineTypeCounts[\"self\"].forEach((lineTypeCount, pieceCount) => {\n        // non-empty line with only own pieces is worth 3, 5, 7, ...\n        score += scoreOwnLine(pieceCount, lineLen) * lineTypeCount;\n      });\n      lineTypeCounts[\"opp\"].forEach((lineTypeCount, pieceCount) => {\n        // non-empty line with only opp pieces is worth 2, 4, 6, ...\n        score += scoreOppLine(pieceCount, lineLen) * lineTypeCount;\n      });\n      return Math.max(3, score); // ensure greater than oppCouldBlockWinOnTop case\n    }\n  }\n\n  // increase onw of the counts\n  function addLineType(lineTypeCounts, { isWinner, counts, fill }) {\n    if (counts[0] === 0 && counts[1] === 0) {\n      // no pieces in this line\n      lineTypeCounts[\"empty\"] += 1;\n    } else if (fill !== \"fillable\" || counts[0] * counts[1] > 0) {\n      // can't be filled, or it already has both pieces\n      lineTypeCounts[\"dead\"] += 1;\n    } else if (counts[computerIndex] > 0) {\n      // only own pieces in this line\n      lineTypeCounts[\"self\"][counts[computerIndex]] += 1;\n    } else {\n      // only opp pieces in this line\n      lineTypeCounts[\"opp\"][counts[1 - computerIndex]] += 1;\n    }\n  }\n\n  // pick an index of maximum score\n  function getNextMove(scores) {\n    // find all indices of the largest score\n    let maxVal = -1;\n    let indicesOfMax = [];\n    scores.forEach((score, ind) => {\n      if (score > maxVal) {\n        maxVal = score;\n        indicesOfMax = [ind];\n      } else if (score === maxVal) {\n        indicesOfMax.push(ind);\n      }\n    });\n    // select a random index among those of the largest score\n    return indicesOfMax[Math.floor(Math.random() * indicesOfMax.length)];\n  }\n\n  // based on the difference between the top two scores\n  // (assumes valid scores are non-neg, and at least one positive)\n  function getThinkTime(scores) {\n    // very early in the game, usually easier to play, so adjust maxThinkTime\n    const thisMaxThinkTime = Math.max(\n      minThinkTime,\n      maxThinkTime * Math.sqrt((piecesPlayed + 3) / (rows * cols + 3))\n    );\n    // find the largest two scores (duplicates are distinct)\n    let firstMax = -1;\n    let secondMax = -1;\n    scores.forEach((score) => {\n      if (score > firstMax) {\n        secondMax = firstMax;\n        firstMax = score;\n      } else if (score > secondMax) {\n        secondMax = score;\n      }\n    });\n\n    if (secondMax === -1) {\n      // only one valid play, so pick \"immediately\"\n      return minThinkTime;\n    }\n\n    // otherwise, top two plays are valid and can look at ratio between 0 and 1\n    // top two are guaranteed to be positive\n    // ratio should be at most 1 anyway, but add bound just in case\n    const ratio = Math.min(1, secondMax / firstMax);\n    const randomFactor =\n      Math.random() * randomFactorRange - randomFactorRange / 2;\n    // the larger the fraction, the longer the move should take\n    return Math.min(\n      thisMaxThinkTime,\n      Math.max(minThinkTime, thisMaxThinkTime * ratio + randomFactor)\n    );\n  }\n\n  //// Effects\n\n  // trigger flag when necessary\n  useEffect(() => {\n    if (active && computersTurn) {\n      setPlayNow(true);\n    }\n  }, [active, computersTurn]);\n\n  // play when flag is raised\n  // (yes, it's ok to run every re-render)\n  // eslint-disable-next-line\n  useEffect(() => {\n    if (playNow) {\n      console.log(Math.floor(thinkTime), scores); // TEMP:\n\n      setTimeout(() => dropInCol(nextMove), thinkTime);\n      setPlayNow(false);\n    }\n  });\n}\n\nexport { useComputerPlayer };\n","import LocalHeader from \"./LocalHeader.js\";\nimport Board from \"./../Game/Board.js\";\nimport GameFooter from \"./../Game/GameFooter.js\";\n\nimport { useGame } from \"./../Game/useGame.js\";\nimport { useGameSoundEffects } from \"./../Game/useGameSoundEffects.js\";\nimport { useResults } from \"./../Game/useResults.js\";\nimport { useComputerPlayer } from \"./../Computer/useComputerPlayer.js\";\n\nfunction LocalPlay({ sharingScreen, player, opponent, unmount }) {\n  // the game custom hook\n  const {\n    gameStatus,\n    toPlayNext,\n    winner,\n    startGame,\n    placePiece,\n    setForfeiter,\n    keyAttributes,\n    boardStats,\n  } = useGame();\n  const { positions, columns } = boardStats;\n\n  useGameSoundEffects(sharingScreen, gameStatus, toPlayNext, winner);\n\n  // keep track of result history\n  const { resultHistory } = useResults(gameStatus, winner);\n\n  // computer player, when applicable\n  const computerIndex = 1;\n  useComputerPlayer(\n    opponent.type === \"computer\",\n    computerIndex,\n    toPlayNext === computerIndex,\n    (col) => placePiece(col, computerIndex),\n    () => setForfeiter(computerIndex),\n    keyAttributes,\n    boardStats\n  );\n\n  // functions for sub-components\n\n  function makeMove(col) {\n    placePiece(col, sharingScreen ? toPlayNext : 0);\n  }\n\n  return (\n    <>\n      <LocalHeader\n        sharingScreen={sharingScreen}\n        names={[player.name, opponent.name]}\n        resultHistory={resultHistory}\n        unmount={unmount}\n      />\n      <Board\n        viewer={sharingScreen ? toPlayNext : 0}\n        positions={positions}\n        columns={columns}\n        isViewersTurn={sharingScreen ? toPlayNext !== null : toPlayNext === 0}\n        colours={[player.colour, opponent.colour]}\n        makeMove={makeMove}\n      />\n      <GameFooter\n        sharingScreen={sharingScreen}\n        viewer={sharingScreen ? toPlayNext : 0}\n        isOwner={true}\n        names={[sharingScreen ? player.name : \"You\", opponent.name]}\n        gameStatus={gameStatus}\n        winner={winner}\n        toPlayNext={toPlayNext}\n        forfeit={setForfeiter}\n        startNewGame={startGame}\n        hasRestartChoice={true}\n      />\n    </>\n  );\n}\n\nexport default LocalPlay;\n","export default __webpack_public_path__ + \"static/media/website-logo.2a15d8d0.svg\";","import \"./links.css\";\n\nimport gitHubImage from \"./github.png\";\nimport gitHubImageDark from \"./github-dark.png\";\nimport websiteImage from \"./website-logo.svg\";\n\nfunction Links({ gitHubLink, themeType = \"light\" }) {\n  const links = [\n    [\"Personal Website\", \"https://kr-matthews.github.io/\", websiteImage],\n    [\n      \"Project Repository\",\n      gitHubLink,\n      themeType === \"light\" ? gitHubImage : gitHubImageDark,\n    ],\n  ];\n\n  return (\n    <div className=\"link-footer\">\n      {links.map(([description, url, image]) => (\n        <Link key={url} description={description} url={url} image={image} />\n      ))}\n    </div>\n  );\n}\n\nfunction Link({ url, image, description }) {\n  return (\n    <a\n      href={url}\n      className=\"link-tooltip-container\"\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n    >\n      <img className=\"link-image\" src={image} alt=\"\" />\n      <span className=\"link-tooltip\">{description}</span>\n    </a>\n  );\n}\n\nexport default Links;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNTE3OEEyQTk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNTE3OEEyQjk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTI4OTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTI5OTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+m4QGuQAAAyRJREFUeNrEl21ojWEYx895TDPbMNlBK46IUiNmPvHBSUjaqc0H8pF5+aDUKPEBqU2NhRQpX5Rv5jWlDIWlMCv7MMSWsWwmb3tpXub4XXWdPHvc9/Gc41nu+nedc7/8r/99PffLdYdDPsvkwsgkTBwsA/PADJCnzX2gHTwBt8Hl7p537/3whn04XoDZDcpBlk+9P8AFcAghzRkJwPF4zGGw0Y9QS0mAM2AnQj77FqCzrtcwB1Hk81SYojHK4DyGuQ6mhIIrBWB9Xm7ug/6B/nZrBHBegrkFxoVGpnwBMSLR9EcEcC4qb8pP14BWcBcUgewMnF3T34VqhWMFkThLJAalwnENOAKiHpJq1FZgI2AT6HZtuxZwR9GidSHtI30jOrbawxlVX78/AbNfhHlomEUJJI89O2MqeE79T8/nk8nMBm/dK576hZgmA3cp/R4l9/UeSxiHLVIlNm4nFfT0bxyuIj7LHRTKai+zdJobwMKzcZSJb0ePV5PKN+BqAAKE47UlMnERELMM3EdYP/yrd+XYb2mOiYBiQ8OQnoRBlXrl9JZix7D1pHTazu4MoyBcnYamqAjIMTR8G4FT8LuhLsexXYYjICBiqhQBvYb6fLZIJCjPypVvaOoVAW2WcasCnL2Nq82xHJNSqlCeFcDshaPK0twkAhosjZL31QYw+1rlMpWGMArl23SBsZZO58F2tlJXmjOXS+s4WGvpMiBJT/I2PInZ6lIs9/hBsNS1hS6BG0DSqmYEDRlCXQrmy50P1oDRKTSegmNbUsA0zDMwRhPJXeCE3vWLPQMvan6X8AgIa1vcR4AkGZkDR4ejJ1UHpsaVI0g2LInpOsNFUud1rhxSV+fzC9Woz2EZkWQuja7/B+jUrgtIMpy9YCW4n4K41YfzRneW5E1KJTe4B2Zq1Q5EHEtj4U3AfEzR5SVY4l7QYQPJdN2as7RKBF0BPZqqH4VgMAMBL8Byxr7y8zCZiDlnOcEKIPmUpgB5Z2ww5RdOiiRiNajUmWda5IG6WbhsyY2fx6m8gLcoJDJFkH219M3We1+cnda93pfycZpIJEL/s/wSYADmOAwAQgdpBAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RERCMUIwOUY4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RERCMUIwOUU4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJBOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJCOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+jUqS1wAAApVJREFUeNq0l89rE1EQx3e3gVJoSPzZeNEWPKgHoa0HBak0iHiy/4C3WvDmoZ56qJ7txVsPQu8qlqqHIhRKJZceesmhioQEfxTEtsoSpdJg1u/ABJ7Pmc1m8zLwgWTmzcw3L+/te+tHUeQltONgCkyCi2AEDHLsJ6iBMlgHL8FeoqokoA2j4CloRMmtwTmj7erHBXPgCWhG6a3JNXKdCiDl1cidVbXZkJoXQRi5t5BrxwoY71FzU8S4JuAIqFkJ2+BFSlEh525b/hr3+k/AklDkNsf6wTT4yv46KIMNpsy+iMdMc47HNWxbsgVcUn7FmLAzzoFAWDsBx+wVP6bUpp5ewI+DOeUx0Wd9D8F70BTGNjkWtqnhmT1JQAHcUgZd8Lo3rQb1LAT8eJVUfgGvHQigGp+V2Z0iAUUl8QH47kAA1XioxIo+bRN8OG8F/oBjwv+Z1nJgX5jpdzQDw0LCjsPmrcW7I/iHScCAEDj03FtD8A0EyuChHgg4KTlJQF3wZ7WELppnBX+dBFSVpJsOBWi1qiRgSwnOgoyD5hmuJdkWCVhTgnTvW3AgYIFrSbZGh0UW/Io5Vp+DQoK7o80pztWMemZbgxeNwCNwDbw1fIfgGZjhU6xPaJgBV8BdsMw5cbZoHsenwYFxkZzl83xTSKTiviCAfCsJLysH3POfC8m8NegyGAGfLP/VmGmfSChgXroR0RSWjEFv2J/nG84cuKFMf4sTCZqXuJd4KaXFVjEG3+tw4eXbNK/YC9oXXs3O8NY8y99L4BXY5cvLY/Bb2VZ58EOJVcB18DHJq9lRsKr8inyKGVjlmh29mtHs3AHfuhCwy1vXT/Nu2GKQt+UHsGdctyX6eQyNvc+5sfX9Dl7Pe2J/BRgAl2CpwmrsHR0AAAAASUVORK5CYII=\"","import { useState } from \"react\";\n\nfunction useLocalState(key, initialValue) {\n  const savedValue = JSON.parse(localStorage.getItem(key));\n  const [value, setValue] = useState(\n    savedValue === null ? initialValue : savedValue\n  );\n  function setLocalValue(newValue) {\n    setValue(newValue);\n    localStorage.setItem(key, JSON.stringify(newValue));\n  }\n  // if using the initialValue, save it into local storage now\n  if (savedValue === null) {\n    setLocalValue(value);\n  }\n  return [value, setLocalValue];\n}\n\nexport { useLocalState };\n","import { useState, useEffect } from \"react\";\n\n// TODO: MAYBE: SOUND: use a queue, incase multiple sounds come in at once?\n\nfunction playSound(url) {\n  new Audio(url).play();\n}\n\nfunction useSound(soundIsOn) {\n  const [soundToPlay, setSoundToPlay] = useState(null);\n\n  // play triggered sound\n  useEffect(() => {\n    if (soundToPlay && soundIsOn) {\n      playSound(soundToPlay);\n    }\n    if (soundToPlay) {\n      setSoundToPlay(null);\n    }\n  }, [soundToPlay, soundIsOn]);\n\n  return { setSoundToPlay };\n}\n\nexport { useSound };\n","import {\n  useState,\n  useMemo,\n  useEffect,\n  useCallback,\n  createContext,\n} from \"react\";\n\nimport PubNub from \"pubnub\";\n// pubnubKeys.js is listed in .gitignore, contains private keys\nimport { subscribeKey, publishKey } from \"./pubnubKeys.js\";\n\nimport Header from \"./Header/Header.js\";\n\nimport PlayerInfo from \"./Header/PlayerInfo.js\";\nimport PlayerName from \"./Header/PlayerName.js\";\nimport PlayerColour from \"./Header/PlayerColour.js\";\n\nimport Options from \"./Header/Options.js\";\nimport PieceGradients from \"./Header/PieceGradients.js\";\nimport SiteTheme from \"./Header/SiteTheme.js\";\nimport SiteSound from \"./Header/SiteSound.js\";\n\nimport Lobby from \"./Lobby/Lobby.js\";\nimport RemotePlay from \"./Remote/RemotePlay.js\";\nimport LocalPlay from \"./Local/LocalPlay.js\";\n\nimport Links from \"./links/Links.js\";\n\nimport { useLocalState } from \"./useLocalState.js\";\nimport { useSound } from \"./sounds/useSound.js\";\n\nimport { getRandomColour } from \"./Colours.js\";\n\n//// Contexts\n\nconst themes = {\n  light: { type: \"light\", background: \"#F5F5F5\", foreground: \"#121212\" },\n  dark: { type: \"dark\", background: \"#121212\", foreground: \"#F5F5F5\" },\n};\nconst GradientContext = createContext(\"all\");\nconst ThemeContext = createContext(themes.light);\nconst SoundContext = createContext();\n\n//// Simple Helpers\n\nfunction generateRandomUuid() {\n  const chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";\n  let uuid = \"\";\n  for (let i = 0; i < 64; i++) {\n    uuid += chars[Math.floor(Math.random() * chars.length)];\n  }\n  return uuid;\n}\n\n//// App\n\nfunction App() {\n  //// States and setters/toggles\n\n  // Site Properties\n\n  const [theme, setTheme] = useLocalState(\"theme\", themes.light);\n  // for applying transition properties to body after initial load\n  const [themeToggled, setThemeToggled] = useState(null);\n\n  function toggleTheme() {\n    setTheme(theme.type === \"light\" ? themes.dark : themes.light);\n    setThemeToggled(true);\n  }\n\n  const [usingGradient, setUsingGradient] = useLocalState(\"gradients\", \"all\");\n  const [soundIsOn, setSoundIsOn] = useLocalState(\"sound\", true);\n  function toggleSound() {\n    setSoundIsOn(!soundIsOn);\n  }\n  const { setSoundToPlay } = useSound(soundIsOn);\n\n  // Player Properties\n\n  const [name, setName] = useLocalState(\"name\", \"Nameless\");\n  const [colour, setColour] = useLocalState(\"colour\", getRandomColour());\n\n  // Opponent Properties\n\n  // other player's name and colour, once they join\\\n  const [opponent, setOpponent] = useState(null);\n  function modifyOpponent(key, val) {\n    setOpponent((prev) => {\n      if (prev) {\n        const copy = { ...prev };\n        copy[key] = val;\n        return copy;\n      }\n    });\n  }\n\n  // indicator for which type of gameplay is being used\n\n  // indicates online, local, or computer (or null if in lobby)\n  const [playType, setPlayType] = useState(null);\n\n  // exit whatever mode of play you're in\n  const resetAll = useCallback(() => {\n    // exit & clear opponent\n    setPlayType(null);\n    setOpponent(null);\n    // cleanup room, if applicable\n    setRoomCode(null);\n    setIsOwner(null);\n    setRestartMethod(null);\n  }, []);\n  // room and network params, shared between lobby and room\n\n  const [roomCode, setRoomCode] = useState(null);\n  const [isOwner, setIsOwner] = useState(null);\n  const [restartMethod, setRestartMethod] = useState(null);\n\n  // constant identifier per user/device\n  const [uuid] = useLocalState(\"uuid\", generateRandomUuid());\n  // pubnub network\n  const network = useMemo(\n    () => new PubNub({ publishKey, subscribeKey, uuid }),\n    [uuid]\n  );\n\n  //// Theme handling\n\n  // set body css properties\n  document.body.style.background = theme.background;\n  document.body.style.color = theme.foreground;\n\n  // after initial load, introduce transition on theme change\n  useEffect(() => {\n    document.body.style.transition = \"all 0.75s ease-in\";\n    document.body.style.transitionProperty = \"background, color\";\n\n    return () => {\n      document.body.style.transition = \"none\";\n      document.body.style.transitionProperty = \"none\";\n    };\n  }, [themeToggled]);\n\n  //// Return\n\n  return (\n    <GradientContext.Provider value={usingGradient}>\n      <ThemeContext.Provider value={theme}>\n        <SoundContext.Provider value={{ setSoundToPlay }}>\n          <h1>Connect 4</h1>\n\n          <Header>\n            <PlayerInfo self={true}>\n              <PlayerName editable={true} name={name} setName={setName} />\n              <PlayerColour\n                editable={true}\n                colour={colour}\n                setColour={setColour}\n              />\n            </PlayerInfo>\n\n            <Options>\n              <PieceGradients\n                usingGradient={usingGradient}\n                setUsingGradient={setUsingGradient}\n              />\n              <SiteSound soundIsOn={soundIsOn} toggleSound={toggleSound} />\n              <SiteTheme themeType={theme.type} toggleTheme={toggleTheme} />\n            </Options>\n\n            {opponent ? (\n              <PlayerInfo self={false}>\n                <PlayerName\n                  editable={playType === \"local\"}\n                  name={opponent.name}\n                  setName={(name) => modifyOpponent(\"name\", name)}\n                />\n                <PlayerColour\n                  editable={playType === \"local\" || playType === \"computer\"}\n                  colour={opponent.colour}\n                  setColour={(colour) => modifyOpponent(\"colour\", colour)}\n                />\n              </PlayerInfo>\n            ) : (\n              <PlayerInfo self={false} />\n            )}\n          </Header>\n\n          {playType === \"online\" ? (\n            <RemotePlay\n              roomCode={roomCode}\n              player={{ name, colour, uuid }}\n              isOwner={isOwner}\n              opponent={opponent}\n              setOpponent={setOpponent}\n              restartMethod={restartMethod}\n              setRestartMethod={setRestartMethod}\n              unmountRoom={resetAll}\n              network={network}\n            />\n          ) : playType === \"local\" ? (\n            <LocalPlay\n              sharingScreen={true}\n              player={{ name, colour }}\n              opponent={opponent}\n              unmount={resetAll}\n            />\n          ) : playType === \"computer\" ? (\n            <LocalPlay\n              sharingScreen={false}\n              player={{ name, colour }}\n              opponent={opponent}\n              unmount={resetAll}\n            />\n          ) : (\n            <Lobby\n              setOpponent={setOpponent}\n              setPlayType={setPlayType}\n              setRoomCode={setRoomCode}\n              setIsOwner={setIsOwner}\n              setRestartMethod={setRestartMethod}\n              network={network}\n            />\n          )}\n          <Links\n            gitHubLink=\"https://github.com/kr-matthews/connect-4\"\n            themeType={theme.type}\n          />\n        </SoundContext.Provider>\n      </ThemeContext.Provider>\n    </GradientContext.Provider>\n  );\n}\n\nexport default App;\n\nexport { GradientContext, ThemeContext, SoundContext };\n","// These are the (old, exposed) demo keys\nexport const publishKey = \"pub-c-444b80e2-3dd6-4998-ba4d-fdb8ea2f2d63\";\nexport const subscribeKey = \"sub-c-d1ada3dc-38d4-11ec-8182-fea14ba1eb2b\";\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}