(this["webpackJsonpconnect-4"]=this["webpackJsonpconnect-4"]||[]).push([[0],{30:function(e,t,n){},31:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),c=n(15),a=n.n(c),i=n(2),l=n(16),s=n.n(l),u=n(6),d=n(0);var b=function(e){var t=e.children;return Object(d.jsx)("div",{children:t.map((function(e,t){return Object(d.jsx)("div",{children:e},t)}))})};var j=function(e){var t=e.children;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{children:"Lobby"}),Object(d.jsx)("p",{children:"Welcome to the Connect 4 lobby. Here, you can create or join a room. Rooms are where you can play a game of Connect 4, and can fit up to 2 players."}),t]})};var h=function(e){var t=e.name,n=e.setName,o=e.publishName,c=Object(r.useState)(!1),a=Object(i.a)(c,2),l=a[0],s=a[1];function u(){var e=""===t?"Nameless":t.trim();n(e),o(e),s(!1)}return Object(d.jsxs)(d.Fragment,{children:["Your name is"," ",l?Object(d.jsx)("input",{autoFocus:!0,type:"text",value:t,placeholder:"Name",onChange:function(e){e.target.value.length<=20&&n(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&u()},onBlur:u}):Object(d.jsx)("button",{onClick:function(){s(!0)},children:t}),"."]})};var m=function(e){var t=e.colour,n=e.setColour,r=e.publishColour;return Object(d.jsxs)(d.Fragment,{children:["Your piece colour is"," ",Object(d.jsx)("input",{type:"color",value:t,onChange:function(e){var t=e.target.value;n(t),r(t)}}),"."]})};var f=function(e){var t=e.themeType,n=e.toggleTheme;return Object(d.jsxs)(d.Fragment,{children:["You're using the ",Object(d.jsx)("button",{onClick:n,children:t})," theme."]})};var p=function(e){var t=e.soundIsOn,n=e.toggleSound;return Object(d.jsxs)(d.Fragment,{children:["Sound is ",Object(d.jsx)("button",{onClick:n,children:t?"on":"off"}),"."]})};var g=function(e){var t=e.createRoomHandler,n=Object(r.useState)("alternate"),o=Object(i.a)(n,2),c=o[0],a=o[1];function l(e){a(e.target.value)}return Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:"Create a Room"}),Object(d.jsx)("p",{children:"Once created, you will be given a room code which you can share with a friend to join."}),Object(d.jsx)("p",{children:"The first player of the first game will be selected randomly. Select who will go first in subsequent games."}),Object(d.jsxs)("form",{children:[["Alternate","Loser","Winner","Random"].map((function(e){return Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"radio",value:e.toLowerCase(),checked:c===e.toLowerCase(),onChange:l}),e]},e)})),Object(d.jsx)("button",{onClick:function(e){e.preventDefault(),t(c)},children:"Create"})]})]})};var O=function(e){var t=e.joinRoomHandler,n=Object(r.useState)(""),o=Object(i.a)(n,2),c=o[0],a=o[1];return Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:"Join a Room"}),Object(d.jsx)("p",{children:"If someone else has given you a code, use that code to join their room. Codes are 4 characters."}),Object(d.jsxs)("form",{children:[Object(d.jsx)("input",{type:"text",value:c,placeholder:"enter room code",onChange:function(e){a(e.target.value.toUpperCase().trim())}}),Object(d.jsx)("button",{onClick:function(e){e.preventDefault(),c&&t(c)},children:"Join"})]})]})},v=n(3),w=n(9),y=n.n(w),x=n(18);var A=function(e){var t=e.roomCode,n=e.isOwner,r=e.opponent,o=e.restartMethod,c=e.resultHistory,a=e.kickOpponentHandler,i=e.closeRoomHandler,l=e.leaveRoomHandler,s="random"===o?"The first player of a new game is selected randomly.":"alternate"===o?"Players alternate playing first in a new game.":"The "+o+" of a game will go first for the next game. In the event of a draw, the same player will go first.",u=function(){var e=Object(x.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(t);case 2:alert("Room code "+t+" copied to clipboard.");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[r?Object(d.jsxs)("div",{children:["You are playing against"," ",Object(d.jsx)("span",{style:{color:r.colour},children:r.name}),"."]}):n?Object(d.jsx)("div",{children:"Waiting for an opponent to join the room."}):Object(d.jsx)("div",{children:"Waiting for opponent information to be fetched."}),n?Object(d.jsx)("div",{children:"You created and are in control of this room."}):r?Object(d.jsxs)("div",{children:["You are in ",r.name,"'s room. They have control of the room."]}):Object(d.jsx)("div",{children:"You do not have control of this room."}),Object(d.jsxs)("div",{children:["The room code is ",Object(d.jsx)("button",{onClick:u,children:t}),"."]}),Object(d.jsx)("div",{children:s}),r&&Object(d.jsxs)("div",{children:[Object(d.jsxs)("span",{children:["Wins: ",c.wins]}),Object(d.jsxs)("span",{children:["Draws: ",c.draws]}),Object(d.jsxs)("span",{children:["Loses: ",c.loses]})]}),Object(d.jsxs)("div",{children:[n?Object(d.jsx)("button",{onClick:i,children:"Close Room"}):Object(d.jsx)("button",{onClick:l,children:"Leave Room"}),n&&r&&Object(d.jsx)("button",{onClick:a,children:"Kick Opponent"})]})]})};var k=function(e){var t=e.children;return Object(d.jsx)(d.Fragment,{children:t})},M=["#FF0000","#FF69B4","#FF8C00","#FFD700","#FF00FF","#228B22","#0000FF","#8B4513","#C0C0C0"];function R(e){var t=function(e,t,n){var r=Math.min(e,t,n),o=Math.max(e,t,n),c=o-r,a=o+r,i=(o+r)/2;if(0===c)return[0,0,i];var l=((o-e)/6+c/2)/c,s=((o-t)/6+c/2)/c,u=((o-n)/6+c/2)/c,d=e===o?u-s:t===o?1/3+l-u:n===o?2/3+s-l:"N/A";return[d<0?d+1:d>1?d-1:d,i<.5?c/a:c/(2-a),i]}(parseInt(e.substring(1,3),16)/255,parseInt(e.substring(3,5),16)/255,parseInt(e.substring(5,7),16)/255),n=Object(i.a)(t,3),r=n[0],o=function(e,t,n){if(0===t)return[n,n,n];var r=n<.5?n*(1+t):n+t-t*n,o=2*n-r;return[I(o,r,e+1/3),I(o,r,e),I(o,r,e-1/3)]}(r>.5?r-.5:r+.5,n[1],1-n[2]),c=Object(i.a)(o,3),a=c[0],l=c[1],s=c[2];return"#"+H(Math.round(255*a).toString(16)).toUpperCase()+H(Math.round(255*l).toString(16)).toUpperCase()+H(Math.round(255*s).toString(16)).toUpperCase()}function H(e){return 2===e.length?e:"0"+e}function I(e,t,n){var r=n<0?n+1:n>1?n-1:n;return 6*r<1?e+6*(t-e)*r:2*r<1?t:3*r<2?e+6*(2/3-r)*(t-e):e}n(30);function N(e){var t=e.row,n=e.viewer,r=e.isViewersTurn,o=e.moveHandler,c=e.colours,a=t.map((function(e,t){var a=e.player,i=e.isHighlight,l=e.colIsOpen;return Object(d.jsx)(C,{clickHandler:function(){return o(t,n)},colour:c[a],isHighlight:i,isClickable:r&&l},t)}));return Object(d.jsx)("tr",{children:a})}function C(e){var t=e.clickHandler,n=e.colour,o=e.isHighlight,c=e.isClickable,a=Object(r.useContext)(ue),i=a.background,l=a.foreground,s=n||i,u={backgroundColor:s,borderColor:o?R(s):s},b=c?"clickable cell":"cell",j={borderColor:l};return Object(d.jsx)("td",{className:b,style:j,onClick:t,children:Object(d.jsx)("span",{className:"piece",style:u})})}var T=function(e){for(var t=e.viewer,n=e.board,o=e.isViewersTurn,c=e.colours,a=e.moveHandler,i=Object(r.useContext)(ue).foreground,l=[],s=n.length-1;s>-1;s--)l.push(Object(d.jsx)(N,{row:n[s],viewer:t,isViewersTurn:o,moveHandler:a,colours:c},s));return Object(d.jsx)("table",{className:"board",style:{backgroundColor:i},children:Object(d.jsx)("tbody",{children:l})})};var S=function(e){var t=e.viewer,n=e.isOwner,r=e.gameStatus,o=e.winner,c=e.toPlayNext,a=e.forfeitHandler,i=e.newGameHandler;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("p",{children:function(){switch(r){case"won":return o===t?"Congratulations, you won!":"You lost.";case"forfeit":return o===t?"Your opponent has forfeit the game -- you win.":"You lost by forfeiting the game.";case"draw":return"It's a draw.";case"ongoing":return t===c?"It's your turn to drop a piece.":"Waiting for your opponent to play.";default:return"Something has gone wrong. Apologies."}}()}),"ongoing"===r?Object(d.jsx)("button",{onClick:function(){return a(t)},children:"Forfeit"}):n&&Object(d.jsx)("button",{onClick:i,children:"New Game"})]})},E=n(12),J=n.p+"static/media/water_dropwav-6707.104e70a9.mp3",F=n.p+"static/media/good-6081.4c04bbc5.mp3",B=n.p+"static/media/failure-drum-sound-effect-2mp3-7184.7b134939.mp3",Z=n.p+"static/media/mixkit-retro-game-notification-212.b222ebf0.wav",G=[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]];function D(e,t,n){for(var r=[],o=0;o<e;o++){for(var c=[],a=0;a<t;a++)c.push("empty"===n?{}:n);r.push(c)}return r}function W(e,t){for(var n=e.length,r=[e[0].length,e[0][0].length],o=r[0],c=r[1],a=D(o,c,"empty"),i=0;i<o;i++)for(var l=0;l<c;l++){a[i][l]={};for(var s=0;s<n;s++)a[i][l][t[s]]=e[s][i][l]}return a}function Y(e,t){var n=Object(E.a)(e);switch(t.type){case"reset":return[];case"addMove":var r=t.player,o=t.row,c=t.col;return n.push({player:r,row:o,col:c}),n;case"undo":return e===[]?e:(n.pop(),n);default:return console.log("moveHistoryReducer switch didn't match any case"),e}}function U(e,t){var n=Object(E.a)(e);switch(t.type){case"reset":return D(t.rows,t.cols,null);case"placePiece":return n[t.row][t.col]=t.player,n;case"undo":return n[t.row][t.col]=null,n;default:return console.log("peicesReducer switch didn't match any case"),e}}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,c=Object(r.useState)(e),a=Object(i.a)(c,2),l=a[0],s=a[1],u=Object(r.useState)(null),d=Object(i.a)(u,2),b=d[0],j=d[1],h=Object(r.useReducer)(Y,[]),m=Object(i.a)(h,2),f=m[0],p=m[1],g=Object(r.useReducer)(U,D(t,n,null)),O=Object(i.a)(g,2),v=O[0],w=O[1],y=S()?"won":T()?"draw":"ongoing",x=null!==b?"forfeit":y,A="forfeit"===x?1-b:"won"!==x?null:f[f.length-1].player,k=E(),M=P(),R=W([v,k,M],["player","isHighlight","colIsOpen"]),H="ongoing"!==x?null:0===f.length?l:1-f[f.length-1].player,I=Object(r.useContext)(de),N=I.setSoundToPlay;function C(e){for(var n=0;n<t;n++)if(null===v[n][e])return n;return null}function T(){for(var e=0;e<n;e++)if(null===v[t-1][e])return!1;return!0}function S(){if(f.length<2*o-1)return!1;for(var e=f[f.length-1],t=e.player,n=e.row,r=e.col,c=0;c<G.length;c++)for(var a=Object(i.a)(G[c],2),l=a[0],s=a[1],u=-3;u<1;u++)if(L(t,n+u*l,r+u*s,l,s))return!0;return!1}function E(){var e=D(t,n,!1);if(f.length<2*o-1)return e;for(var r=f[f.length-1],c=r.player,a=r.row,l=r.col,s=0;s<G.length;s++)for(var u=Object(i.a)(G[s],2),d=u[0],b=u[1],j=1-o;j<1;j++)if(L(c,a+j*d,l+j*b,d,b))for(var h=j;h<j+o;h++)e[a+h*d][l+h*b]=!0;return e}function P(){for(var e=D(t,n),r=0;r<n;r++)for(var o=null===v[t-1][r],c=0;c<t;c++)e[c][r]=o;return e}function L(e,r,c,a,i){for(var l=0;l<o;l++){var s=r+l*a,u=c+l*i;if(0>s||s>=t||0>u||u>=n||v[s][u]!==e)return!1}return!0}function Q(e){s(e),j(null),p({type:"reset"}),w({type:"reset",rows:t,cols:n})}function X(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H,n=C(e);"ongoing"===x&&t===H&&null!==n&&(p({type:"addMove",player:t,row:n,col:e}),w({type:"placePiece",player:t,row:n,col:e}))}function V(e){j(e)}return Object(r.useEffect)((function(){0===A?N(F):1===A&&N(B)}),[A,N]),Object(r.useEffect)((function(){"draw"===x&&N(Z)}),[x,N]),Object(r.useEffect)((function(){0===H&&N(J)}),[H,N]),{board:R,gameStatus:x,toPlayNext:H,winner:A,resetGame:Q,placePiece:X,forfeit:V}}var L=n.p+"static/media/chime-sound-7143.09264db5.mp3",Q=n.p+"static/media/notification-sound-7062.d73a4897.mp3",X=n.p+"static/media/fist-punch-or-kick-7171.1d430a44.mp3";function V(e,t){if("reset"===t.type)return z;var n=Object(v.a)({},e);return n[t.type+"s"]+=1,n}var z={wins:0,draws:0,loses:0};var K=function(e){var t=e.player,n=e.isOwner,o=e.roomCode,c=e.restartMethod,a=e.closeRoomHandler,l=e.leaveRoomHandler,s=Object(u.b)(),b=Object(r.useCallback)((function(e){s.publish({message:Object(v.a)(Object(v.a)({},e),{},{uuid:t.uuid}),channel:o})}),[t.uuid,s,o]),j=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.floor(2*Math.random()),c=Object(r.useState)(null),a=Object(i.a)(c,2),l=a[0],s=a[1],u=null===l?1:2,d=Object(r.useReducer)(V,z),b=Object(i.a)(d,2),j=b[0],h=b[1],m=P(o),f=m.board,p=m.gameStatus,g=m.toPlayNext,O=m.winner,w=m.resetGame,y=m.placePiece,x=m.forfeit,A=Object(r.useState)(o),k=Object(i.a)(A,2),M=k[0],R=k[1];Object(r.useEffect)((function(){0===O?h({type:"win"}):1===O&&h({type:"lose"})}),[O]),Object(r.useEffect)((function(){"draw"===p&&h({type:"draw"})}),[p]),Object(r.useEffect)((function(){1===u&&h({type:"reset"})}),[u]);var H=Object(r.useContext)(de).setSoundToPlay;function I(){var e=null;switch(t){case"random":e=Math.floor(2*Math.random());break;case"alternate":e=1-M;break;case"loser":e="draw"===p?M:1-O;break;case"winner":e="draw"===p?M:O;break;default:console.log("New Game click handler didn't match any case."),e=0}w(e),R(e),n({type:"newGame",toGoFirst:e})}function N(e){0===g&&(y(e,0),n({type:"move",col:e}))}function C(e){x(e),n({type:"forfeit"})}function T(){s(null),n({type:"kick"}),H(X)}Object(r.useEffect)((function(){H(1===u?Q:L)}),[u,H]);var S=function(t){switch(t.type){case"join":var r=t.name,o=t.colour;s({name:r,colour:o}),n(Object(v.a)(Object(v.a)({},e),{},{type:"update"})),I();break;case"update":case"name":case"colour":s((function(e){return{name:t.name||e.name,colour:t.colour||e.colour}}));break;case"leave":s(null),alert("Your opponent left."),w(1)}};return{opponent:l,resultHistory:j,board:f,gameStatus:p,winner:O,toPlayNext:g,moveHandler:N,forfeitHandler:C,newGameHandler:I,kickOpponentHandler:T,opponentInfoMessageHandler:S,gameMessageHandler:function(e){switch(e.type){case"move":y(e.col,1);break;case"forfeit":x(1);break;case"newGame":w(1-e.toGoFirst),R(1-e.toGoFirst)}}}}(t,c,b),h=j.opponent,m=j.resultHistory,f=j.board,p=j.gameStatus,g=j.winner,O=j.toPlayNext,w=j.moveHandler,y=j.forfeitHandler,x=j.newGameHandler,M=j.kickOpponentHandler,R=j.opponentInfoMessageHandler,H=j.gameMessageHandler,I=Object(r.useState)(null),N=Object(i.a)(I,2),C=N[0],E=N[1],J=Object(r.useState)(null),F=Object(i.a)(J,2),B=F[0],Z=F[1];return Object(r.useEffect)((function(){var e={message:function(e){switch(e.message.type){case"join":case"update":case"name":case"colour":case"leave":E(e.message)}}};return s.addListener(e),function(){s.removeListener(e)}}),[s]),Object(r.useEffect)((function(){var e={message:function(e){switch(e.message.type){case"move":case"forfeit":case"newGame":Z(e.message)}}};return s.addListener(e),function(){s.removeListener(e)}}),[s]),Object(r.useEffect)((function(){C&&C.uuid!==t.uuid&&R(C),C&&E(null)}),[C,R,t.uuid]),Object(r.useEffect)((function(){B&&B.uuid!==t.uuid&&H(B),B&&Z(null)}),[B,H,t.uuid]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{children:"Room"}),Object(d.jsx)(A,{roomCode:o,isOwner:n,opponent:h,restartMethod:c,resultHistory:m,kickOpponentHandler:M,closeRoomHandler:a,leaveRoomHandler:l}),h&&Object(d.jsxs)(k,{children:[Object(d.jsx)(T,{viewer:0,board:f,isViewersTurn:0===O,colours:[t.colour,h.colour],moveHandler:w}),Object(d.jsx)(S,{viewer:0,isOwner:n,gameStatus:p,winner:g,toPlayNext:O,forfeitHandler:y,newGameHandler:x})]})]})},q=(n(31),n.p+"static/media/website-logo.2a15d8d0.svg");function _(e){var t=e.url,n=e.image,r=e.description;return Object(d.jsxs)("a",{href:t,className:"link-tooltip-container",target:"_blank",rel:"noopener noreferrer",children:[Object(d.jsx)("img",{className:"link-image",src:n,alt:""}),Object(d.jsx)("span",{className:"link-tooltip",children:r})]})}var $,ee=function(e){var t=e.gitHubLink,n=e.themeType,r=[["Personal Website","https://kr-matthews.github.io/",q],["Project Repository",t,"light"===(void 0===n?"light":n)?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNTE3OEEyQTk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNTE3OEEyQjk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTI4OTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTI5OTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+m4QGuQAAAyRJREFUeNrEl21ojWEYx895TDPbMNlBK46IUiNmPvHBSUjaqc0H8pF5+aDUKPEBqU2NhRQpX5Rv5jWlDIWlMCv7MMSWsWwmb3tpXub4XXWdPHvc9/Gc41nu+nedc7/8r/99PffLdYdDPsvkwsgkTBwsA/PADJCnzX2gHTwBt8Hl7p537/3whn04XoDZDcpBlk+9P8AFcAghzRkJwPF4zGGw0Y9QS0mAM2AnQj77FqCzrtcwB1Hk81SYojHK4DyGuQ6mhIIrBWB9Xm7ug/6B/nZrBHBegrkFxoVGpnwBMSLR9EcEcC4qb8pP14BWcBcUgewMnF3T34VqhWMFkThLJAalwnENOAKiHpJq1FZgI2AT6HZtuxZwR9GidSHtI30jOrbawxlVX78/AbNfhHlomEUJJI89O2MqeE79T8/nk8nMBm/dK576hZgmA3cp/R4l9/UeSxiHLVIlNm4nFfT0bxyuIj7LHRTKai+zdJobwMKzcZSJb0ePV5PKN+BqAAKE47UlMnERELMM3EdYP/yrd+XYb2mOiYBiQ8OQnoRBlXrl9JZix7D1pHTazu4MoyBcnYamqAjIMTR8G4FT8LuhLsexXYYjICBiqhQBvYb6fLZIJCjPypVvaOoVAW2WcasCnL2Nq82xHJNSqlCeFcDshaPK0twkAhosjZL31QYw+1rlMpWGMArl23SBsZZO58F2tlJXmjOXS+s4WGvpMiBJT/I2PInZ6lIs9/hBsNS1hS6BG0DSqmYEDRlCXQrmy50P1oDRKTSegmNbUsA0zDMwRhPJXeCE3vWLPQMvan6X8AgIa1vcR4AkGZkDR4ejJ1UHpsaVI0g2LInpOsNFUud1rhxSV+fzC9Woz2EZkWQuja7/B+jUrgtIMpy9YCW4n4K41YfzRneW5E1KJTe4B2Zq1Q5EHEtj4U3AfEzR5SVY4l7QYQPJdN2as7RKBF0BPZqqH4VgMAMBL8Byxr7y8zCZiDlnOcEKIPmUpgB5Z2ww5RdOiiRiNajUmWda5IG6WbhsyY2fx6m8gLcoJDJFkH219M3We1+cnda93pfycZpIJEL/s/wSYADmOAwAQgdpBAAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RERCMUIwOUY4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RERCMUIwOUU4NkNFMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJBOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJCOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+jUqS1wAAApVJREFUeNq0l89rE1EQx3e3gVJoSPzZeNEWPKgHoa0HBak0iHiy/4C3WvDmoZ56qJ7txVsPQu8qlqqHIhRKJZceesmhioQEfxTEtsoSpdJg1u/ABJ7Pmc1m8zLwgWTmzcw3L+/te+tHUeQltONgCkyCi2AEDHLsJ6iBMlgHL8FeoqokoA2j4CloRMmtwTmj7erHBXPgCWhG6a3JNXKdCiDl1cidVbXZkJoXQRi5t5BrxwoY71FzU8S4JuAIqFkJ2+BFSlEh525b/hr3+k/AklDkNsf6wTT4yv46KIMNpsy+iMdMc47HNWxbsgVcUn7FmLAzzoFAWDsBx+wVP6bUpp5ewI+DOeUx0Wd9D8F70BTGNjkWtqnhmT1JQAHcUgZd8Lo3rQb1LAT8eJVUfgGvHQigGp+V2Z0iAUUl8QH47kAA1XioxIo+bRN8OG8F/oBjwv+Z1nJgX5jpdzQDw0LCjsPmrcW7I/iHScCAEDj03FtD8A0EyuChHgg4KTlJQF3wZ7WELppnBX+dBFSVpJsOBWi1qiRgSwnOgoyD5hmuJdkWCVhTgnTvW3AgYIFrSbZGh0UW/Io5Vp+DQoK7o80pztWMemZbgxeNwCNwDbw1fIfgGZjhU6xPaJgBV8BdsMw5cbZoHsenwYFxkZzl83xTSKTiviCAfCsJLysH3POfC8m8NegyGAGfLP/VmGmfSChgXroR0RSWjEFv2J/nG84cuKFMf4sTCZqXuJd4KaXFVjEG3+tw4eXbNK/YC9oXXs3O8NY8y99L4BXY5cvLY/Bb2VZ58EOJVcB18DHJq9lRsKr8inyKGVjlmh29mtHs3AHfuhCwy1vXT/Nu2GKQt+UHsGdctyX6eQyNvc+5sfX9Dl7Pe2J/BRgAl2CpwmrsHR0AAAAASUVORK5CYII="]];return Object(d.jsx)("div",{className:"link-footer",children:r.map((function(e){var t=Object(i.a)(e,3),n=t[0],r=t[1],o=t[2];return Object(d.jsx)(_,{description:n,url:r,image:o},r)}))})},te=n(19),ne=n(20),re=Object(ne.a)($||($=Object(te.a)(["\n  body {\n      background: ",";\n      color: ",";\n      transition: all 0.75s ease-in;\n      transition-property: background, color\n    }\n  "])),(function(e){return e.theme.background}),(function(e){return e.theme.foreground}));function oe(e,t){var n=JSON.parse(localStorage.getItem(e)),o=Object(r.useState)(null===n?t:n),c=Object(i.a)(o,2),a=c[0],l=c[1];function s(t){l(t),localStorage.setItem(e,JSON.stringify(t))}return null===n&&s(a),[a,s]}function ce(e){var t=Object(r.useState)(null),n=Object(i.a)(t,2),o=n[0],c=n[1];return Object(r.useEffect)((function(){o&&e&&new Audio(o).play(),c(null)}),[o,e]),{setSoundToPlay:c}}var ae=n.p+"static/media/success-1-6297.fd2c2fea.mp3",ie=n.p+"static/media/power-down-7103.2164432c.mp3";function le(e,t,n){var o=Object(r.useState)(null),c=Object(i.a)(o,2),a=c[0],l=c[1],s=Object(r.useState)(null),u=Object(i.a)(s,2),d=u[0],b=u[1],j=Object(r.useState)("alternate"),h=Object(i.a)(j,2),m=h[0],f=h[1],p=Object(r.useCallback)((function(e){"kick"===e.type&&alert("The owner of the room kicked you out."),"close"===e.type&&alert("The owner of the room left and so the room has closed."),t.unsubscribe({channels:[a]}),l(null)}),[t,a]),g=Object(r.useState)(null),O=Object(i.a)(g,2),w=O[0],y=O[1];function x(e){t.hereNow({channels:[e]}).then((function(e){return e.totalOccupancy>0}))}return Object(r.useEffect)((function(){var e={message:function(e){switch(e.message.type){case"close":case"kick":y(e.message)}}};return t.addListener(e),function(){t.removeListener(e)}}),[t]),Object(r.useEffect)((function(){w&&w.uuid!==n.uuid&&p(w),w&&y(null)}),[w,p,n.uuid]),{roomCode:a,isOwner:d,restartMethod:m,createRoomHandler:function(n){var r=function(){var e="ABCDEFGHJKMNPQRSTUVXYZ23456789",t="";do{t="";for(var n=0;n<4;n++)t+=e.charAt(Math.floor(Math.random()*e.length))}while(x(t));return t}();t.subscribe({channels:[r],withPresence:!0}),l(r),b(!0),f(n),e(ae)},joinRoomHandler:function(r){t.hereNow({channels:[r]}).then((function(o){0===o.totalOccupancy?alert("No room with code "+r+" currently exists."):1===o.totalOccupancy?(t.subscribe({channels:[r],withPresence:!0}),l(r),b(!1),e(F),t.publish({message:Object(v.a)(Object(v.a)({},n),{},{type:"join"}),channel:r})):alert("The room with code "+r+" already has two players.")})).catch((function(e){console.log(e)}))},closeRoomHandler:function(){t.publish({message:{type:"close",uuid:n.uuid},channel:a}),t.unsubscribe({channels:[a]}),l(null),b(null),e(ie)},leaveRoomHandler:function(){t.publish({message:{type:"leave",uuid:n.uuid},channel:a}),t.unsubscribe({channels:[a]}),l(null),b(null),f("alternate"),e(Q)}}}var se={light:{type:"light",background:"#F5F5F5",foreground:"#121212"},dark:{type:"dark",background:"#121212",foreground:"#F5F5F5"}},ue=Object(r.createContext)(se.light),de=Object(r.createContext)();var be=function(){var e=oe("name","Nameless"),t=Object(i.a)(e,2),n=t[0],o=t[1],c=oe("colour",M[Math.floor(Math.random()*M.length)]),a=Object(i.a)(c,2),l=a[0],v=a[1],w=oe("theme",se.light),y=Object(i.a)(w,2),x=y[0],A=y[1],k=oe("sound",!0),R=Object(i.a)(k,2),H=R[0],I=R[1],N=ce(H).setSoundToPlay,C=oe("uuid",function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t="",n=0;n<64;n++)t+=e[Math.floor(Math.random()*e.length)];return t}()),T=Object(i.a)(C,1)[0],S=Object(r.useMemo)((function(){return new s.a({publishKey:"pub-c-444b80e2-3dd6-4998-ba4d-fdb8ea2f2d63",subscribeKey:"sub-c-d1ada3dc-38d4-11ec-8182-fea14ba1eb2b",uuid:T})}),[T]),E=le(N,S,{name:n,colour:l,uuid:T}),J=E.roomCode,F=E.isOwner,B=E.restartMethod,Z=E.createRoomHandler,G=E.joinRoomHandler,D=E.closeRoomHandler,W=E.leaveRoomHandler;return Object(d.jsx)(ue.Provider,{value:x,children:Object(d.jsx)(de.Provider,{value:{setSoundToPlay:N},children:Object(d.jsxs)(u.a,{client:S,children:[Object(d.jsx)(re,{theme:x}),Object(d.jsxs)(b,{children:[Object(d.jsx)(h,{name:n,setName:o,publishName:function(e){J&&S.publish({message:{type:"name",name:e,uuid:T},channel:J})}}),Object(d.jsx)(m,{colour:l,setColour:v,publishColour:function(e){J&&S.publish({message:{type:"colour",colour:e,uuid:T},channel:J})}}),Object(d.jsx)(f,{themeType:x.type,toggleTheme:function(){A("light"===x.type?se.dark:se.light)}}),Object(d.jsx)(p,{soundIsOn:H,toggleSound:function(){I(!H)}})]}),Object(d.jsx)("h1",{children:"Connect 4 [WIP]"}),J?Object(d.jsx)(K,{player:{name:n,colour:l,uuid:T},isOwner:F,roomCode:J,restartMethod:B,closeRoomHandler:D,leaveRoomHandler:W}):Object(d.jsxs)(j,{children:[Object(d.jsx)(g,{createRoomHandler:Z}),Object(d.jsx)(O,{joinRoomHandler:G})]}),Object(d.jsx)(ee,{gitHubLink:"https://github.com/kr-matthews/connect-4",themeType:x.type})]})})})};n(35);a.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(be,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.61a30bee.chunk.js.map