(this["webpackJsonpconnect-4"]=this["webpackJsonpconnect-4"]||[]).push([[0],{13:function(e,r,t){},14:function(e,r,t){},15:function(e,r,t){"use strict";t.r(r);var c=t(1),n=t.n(c),o=t(7),a=t.n(o),l=t(0);var u=function(){return Object(l.jsx)("p",{children:"Options: set name, colour, theme"})};var s=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h2",{children:"Lobby"}),Object(l.jsx)("p",{children:"Create or join a room."})]})},i=t(2),j=t(3);var b=function(){return Object(l.jsx)("p",{children:"Header: room status (names, colours, w-l-d record), room reset options."})};t(13);function d(e){var r=e.viewer,t=e.row,c=e.placePiece,n=e.colours,o=e.toPlayNext,a=t.map((function(e,t){var a=e.player,u=e.inLine;return Object(l.jsx)(p,{viewer:r,col:t,player:a,placePiece:c,colours:n,inLine:u,toPlayNext:o},t)}));return Object(l.jsx)("tr",{children:a})}function p(e){var r=e.viewer,t=e.col,c=e.player,n=e.placePiece,o=e.colours,a=e.inLine,u=e.toPlayNext,s=o[c]||"White",i={backgroundColor:s,borderColor:a?"White":s},j=null===c&&r===u?"clickable cell":"cell";return Object(l.jsx)("td",{className:j,onClick:function(){return null===c&&n(u,t)},children:Object(l.jsx)("span",{className:"piece",style:i})})}var O=function(e){for(var r=e.viewer,t=e.board,c=e.placePiece,n=e.colours,o=e.toPlayNext,a=[],u=t.length-1;u>-1;u--)a.push(Object(l.jsx)(d,{viewer:r,row:t[u],placePiece:c,colours:n,toPlayNext:o},u));return Object(l.jsx)("table",{className:"board",style:{backgroundColor:"Black"},children:Object(l.jsx)("tbody",{children:a})})};var f=function(e){var r=e.resetGame;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("p",{children:"Footer: game status (onging/lost/etc), game reset options."}),Object(l.jsx)("button",{onClick:function(){return r(0)},children:"Reset Game"})]})};function h(e,r){switch(r.type){case"reset":return y(r.boardSize);case"placePiece":var t=Object(j.a)(e);t[r.row][r.col].player=r.player;var c=g(t,r.row,r.col),n=c.success,o=c.r_0,a=c.c_0,l=c.d_r,u=c.d_c;if(n)for(var s=0;s<4;s++)t[o+s*l][a+s*u].inLine=!0;return t;case"undo":if(r.moveHistory===[])return e;var i=Object(j.a)(e);return delete i[r.row][r.col].player,i;default:return e}}function v(e,r){switch(r.type){case"reset":return[];case"addMove":var t=Object(j.a)(e),c=r.player,n=r.row,o=r.col;return t.push({player:c,row:n,col:o}),t;case"undo":if(e===[])return e;var a=Object(j.a)(e);return a.pop(),a;default:return console.log("historyReducer switch didn't match any case"),e}}function y(e){for(var r=Object(i.a)(e,2),t=r[0],c=r[1],n=[],o=0;o<t;o++){for(var a=[],l=0;l<c;l++)a.push({player:null,inLine:!1});n.push(a)}return n}var x=[[0,1],[1,0],[1,1],[-1,1]];function g(e,r,t){var c=[e.length,e[0].length],n=c[0],o=c[1],a=e[r][t].player;if(null===a)return{success:!1};var l=!1,u=null,s=null,j=null,b=null;return x.forEach((function(c){var d=Object(i.a)(c,2),p=d[0],O=d[1];if(!l){u=null,s=null,j=p,b=O;for(var f=0,h=-3;h<4;h++)-1<r+h*p&&r+h*p<n&&-1<t+h*O&&t+h*O<o&&e[r+h*p][t+h*O].player===a?(0===f&&(u=r+h*p,s=t+h*O),(f+=1)>=4&&(l=!0)):f=0}})),{success:l,r_0:u,c_0:s,d_r:j,d_c:b}}function m(e,r){var t=Object(j.a)(e);return t[r.property]=r.value,t}var w=function(){var e=Object(c.useState)(1),r=Object(i.a)(e,2),t=(r[0],r[1],Object(c.useReducer)(m,{name:"Bob",colour:"red"})),n=Object(i.a)(t,2),o=n[0],a=(n[1],function(e){var r=[6,7],t=Object(c.useState)("ongoing"),n=Object(i.a)(t,2),o=n[0],a=n[1],l=Object(c.useState)(e),u=Object(i.a)(l,2),s=u[0],j=u[1],b=Object(c.useReducer)(h,y(r)),d=Object(i.a)(b,2),p=d[0],O=d[1],f=Object(c.useReducer)(v,[]),x=Object(i.a)(f,2),m=x[0],w=x[1];return Object(c.useEffect)((function(){if(m.length>0){var e=m[m.length-1],r=e.row,t=e.col,c=g(p,r,t).success;"ongoing"===o&&c?(a(p[r][t].player),j(null)):"ongoing"===o&&function(e){var r=!1;return e[e.length-1].forEach((function(e){null===e.player&&(r=!0)})),!r}(p)&&(a("draw"),j(null))}}),[m,p,o]),{gameStatus:o,toPlayNext:s,board:p,moveHistory:m,resetGame:function(e){a("ongoing"),j(e),O({type:"reset",boardSize:r}),w({type:"reset"})},placePiece:function(e,r){var t=function(e,r){for(var t=e.length,c=0;c<t;c++)if(null===e[c][r].player)return c;return null}(p,r);"ongoing"===o&&e===s&&null!==t&&(O({type:"placePiece",player:e,row:t,col:r}),w({type:"addMove",player:e,row:t,col:r}),j(1-e))}}}(0)),u=a.gameStatus,s=a.toPlayNext,j=a.board,d=a.resetGame,p=a.placePiece;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h2",{children:"Room"}),Object(l.jsx)(b,{}),Object(l.jsx)(O,{viewer:0,board:j,placePiece:p,colours:["Blue",o.colour],toPlayNext:s}),Object(l.jsx)(f,{gameStatus:u,resetGame:d})]})};var P=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h1",{children:"Connect 4 [WIP]"}),Object(l.jsx)(u,{}),Object(l.jsx)(s,{}),Object(l.jsx)(w,{})]})};t(14);a.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(P,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.d25de0e6.chunk.js.map